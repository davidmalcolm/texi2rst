

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Constant String Objects &mdash; gcc 6 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="gcc 6 documentation" href="index.html" />
    <link rel="up" title="GNU Objective-C Features" href="gnu-objective-c-features.html" />
    <link rel="next" title="&lt;no title&gt;" href="compatibility_alias.html" />
    <link rel="prev" title="Garbage Collection" href="garbage-collection.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="compatibility_alias.html" title="&lt;no title&gt;"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="garbage-collection.html" title="Garbage Collection"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">gcc 6 documentation</a> &raquo;</li>
          <li><a href="gcc.html" >Introduction</a> &raquo;</li>
          <li><a href="gnu-objective-c-features.html" accesskey="U">GNU Objective-C Features</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="garbage-collection.html"
                        title="previous chapter">Garbage Collection</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="compatibility_alias.html"
                        title="next chapter">&lt;no title&gt;</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/constant-string-objects.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="constant-string-objects">
<span id="id1"></span><h1>Constant String Objects<a class="headerlink" href="#constant-string-objects" title="Permalink to this headline">Â¶</a></h1>
<p>GNU Objective-C provides constant string objects that are generated
directly by the compiler.  You declare a constant string object by
prefixing a C constant string with the character &#64;:</p>
<div class="highlight-objective-c"><div class="highlight"><pre><span class="kt">id</span> <span class="n">myString</span> <span class="o">=</span> <span class="s">@&quot;this is a constant string object&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>The constant string objects are by default instances of the
<tt class="docutils literal"><span class="pre">NXConstantString</span></tt> class which is provided by the GNU Objective-C
runtime.  To get the definition of this class you must include the
objc/NXConstStr.h header file.</p>
<p>User defined libraries may want to implement their own constant string
class.  To be able to support them, the GNU Objective-C compiler provides
a new command line options <em class="xref std std-option">-fconstant-string-class=``class-name``</em>.
The provided class should adhere to a strict structure, the same
as <tt class="docutils literal"><span class="pre">NXConstantString</span></tt>&#8216;s structure:</p>
<div class="highlight-objective-c"><div class="highlight"><pre><span class="k">@interface</span> <span class="nc">MyConstantStringClass</span>
<span class="p">{</span>
  <span class="kt">Class</span> <span class="n">isa</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">c_string</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">len</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">NXConstantString</span></tt> inherits from <tt class="docutils literal"><span class="pre">Object</span></tt>; user class
libraries may choose to inherit the customized constant string class
from a different class than <tt class="docutils literal"><span class="pre">Object</span></tt>.  There is no requirement in
the methods the constant string class has to implement, but the final
ivar layout of the class must be the compatible with the given
structure.</p>
<p>When the compiler creates the statically allocated constant string
object, the <tt class="docutils literal"><span class="pre">c_string</span></tt> field will be filled by the compiler with
the string; the <tt class="docutils literal"><span class="pre">length</span></tt> field will be filled by the compiler with
the string length; the <tt class="docutils literal"><span class="pre">isa</span></tt> pointer will be filled with
<tt class="docutils literal"><span class="pre">NULL</span></tt> by the compiler, and it will later be fixed up automatically
at runtime by the GNU Objective-C runtime library to point to the class
which was set by the <a class="reference internal" href="options-controlling-objective-c-and-objective-c++-dialects.html#cmdoption-fconstant-string-class"><em class="xref std std-option">-fconstant-string-class</em></a> option when the
object file is loaded (if you wonder how it works behind the scenes, the
name of the class to use, and the list of static objects to fixup, are
stored by the compiler in the object file in a place where the GNU
runtime library will find them at runtime).</p>
<p>As a result, when a file is compiled with the
<a class="reference internal" href="options-controlling-objective-c-and-objective-c++-dialects.html#cmdoption-fconstant-string-class"><em class="xref std std-option">-fconstant-string-class</em></a> option, all the constant string objects
will be instances of the class specified as argument to this option.  It
is possible to have multiple compilation units referring to different
constant string classes, neither the compiler nor the linker impose any
restrictions in doing this.</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="compatibility_alias.html" title="&lt;no title&gt;"
             >next</a> |</li>
        <li class="right" >
          <a href="garbage-collection.html" title="Garbage Collection"
             >previous</a> |</li>
        <li><a href="index.html">gcc 6 documentation</a> &raquo;</li>
          <li><a href="gcc.html" >Introduction</a> &raquo;</li>
          <li><a href="gnu-objective-c-features.html" >GNU Objective-C Features</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, gcc peeps.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>