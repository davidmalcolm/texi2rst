

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Declaring Attributes of Functions &mdash; gcc 6 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="gcc 6 documentation" href="index.html" />
    <link rel="up" title="Extensions to the C Language Family" href="extensions-to-the-c-language-family.html" />
    <link rel="next" title="Specifying Attributes of Variables" href="specifying-attributes-of-variables.html" />
    <link rel="prev" title="Mixed Declarations and Code" href="mixed-declarations-and-code.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="specifying-attributes-of-variables.html" title="Specifying Attributes of Variables"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mixed-declarations-and-code.html" title="Mixed Declarations and Code"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">gcc 6 documentation</a> &raquo;</li>
          <li><a href="gcc.html" >Introduction</a> &raquo;</li>
          <li><a href="extensions-to-the-c-language-family.html" accesskey="U">Extensions to the C Language Family</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Declaring Attributes of Functions</a><ul>
<li><a class="reference internal" href="#common-function-attributes">Common Function Attributes</a></li>
<li><a class="reference internal" href="#arc-function-attributes">ARC Function Attributes</a></li>
<li><a class="reference internal" href="#arm-function-attributes">ARM Function Attributes</a></li>
<li><a class="reference internal" href="#avr-function-attributes">AVR Function Attributes</a></li>
<li><a class="reference internal" href="#blackfin-function-attributes">Blackfin Function Attributes</a></li>
<li><a class="reference internal" href="#cr16-function-attributes">CR16 Function Attributes</a></li>
<li><a class="reference internal" href="#epiphany-function-attributes">Epiphany Function Attributes</a></li>
<li><a class="reference internal" href="#h8-300-function-attributes">H8/300 Function Attributes</a></li>
<li><a class="reference internal" href="#ia-64-function-attributes">IA-64 Function Attributes</a></li>
<li><a class="reference internal" href="#m32c-function-attributes">M32C Function Attributes</a></li>
<li><a class="reference internal" href="#m32r-d-function-attributes">M32R/D Function Attributes</a></li>
<li><a class="reference internal" href="#m68k-function-attributes">m68k Function Attributes</a></li>
<li><a class="reference internal" href="#mcore-function-attributes">MCORE Function Attributes</a></li>
<li><a class="reference internal" href="#mep-function-attributes">MeP Function Attributes</a></li>
<li><a class="reference internal" href="#microblaze-function-attributes">MicroBlaze Function Attributes</a></li>
<li><a class="reference internal" href="#microsoft-windows-function-attributes">Microsoft Windows Function Attributes</a></li>
<li><a class="reference internal" href="#mips-function-attributes">MIPS Function Attributes</a></li>
<li><a class="reference internal" href="#msp430-function-attributes">MSP430 Function Attributes</a></li>
<li><a class="reference internal" href="#nds32-function-attributes">NDS32 Function Attributes</a></li>
<li><a class="reference internal" href="#nios-ii-function-attributes">Nios II Function Attributes</a></li>
<li><a class="reference internal" href="#powerpc-function-attributes">PowerPC Function Attributes</a></li>
<li><a class="reference internal" href="#rl78-function-attributes">RL78 Function Attributes</a></li>
<li><a class="reference internal" href="#rx-function-attributes">RX Function Attributes</a></li>
<li><a class="reference internal" href="#s-390-function-attributes">S/390 Function Attributes</a></li>
<li><a class="reference internal" href="#sh-function-attributes">SH Function Attributes</a></li>
<li><a class="reference internal" href="#spu-function-attributes">SPU Function Attributes</a></li>
<li><a class="reference internal" href="#symbian-os-function-attributes">Symbian OS Function Attributes</a></li>
<li><a class="reference internal" href="#visium-function-attributes">Visium Function Attributes</a></li>
<li><a class="reference internal" href="#x86-function-attributes">x86 Function Attributes</a></li>
<li><a class="reference internal" href="#xstormy16-function-attributes">Xstormy16 Function Attributes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mixed-declarations-and-code.html"
                        title="previous chapter">Mixed Declarations and Code</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="specifying-attributes-of-variables.html"
                        title="next chapter">Specifying Attributes of Variables</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/declaring-attributes-of-functions.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="declaring-attributes-of-functions">
<span id="function-attributes"></span><h1>Declaring Attributes of Functions<a class="headerlink" href="#declaring-attributes-of-functions" title="Permalink to this headline">¶</a></h1>
<span class="target" id="index-0"></span><span class="target" id="index-1"></span><span class="target" id="index-2"></span><p id="index-3">In GNU C, you can use function attributes to declare certain things
about functions called in your program which help the compiler
optimize calls and check your code more carefully.  For example, you
can use attributes to declare that a function never returns
(<tt class="docutils literal"><span class="pre">noreturn</span></tt>), returns a value depending only on its arguments
(<tt class="docutils literal"><span class="pre">pure</span></tt>), or has <tt class="docutils literal"><span class="pre">printf</span></tt>-style arguments (<tt class="docutils literal"><span class="pre">format</span></tt>).</p>
<p>You can also use attributes to control memory placement, code
generation options or call/return conventions within the function
being annotated.  Many of these attributes are target-specific.  For
example, many targets support attributes for defining interrupt
handler functions, which typically must follow special register usage
and return conventions.</p>
<p>Function attributes are introduced by the <tt class="docutils literal"><span class="pre">__attribute__</span></tt> keyword
on a declaration, followed by an attribute specification inside double
parentheses.  You can specify multiple attributes in a declaration by
separating them by commas within the double parentheses or by
immediately following an attribute declaration with another attribute
declaration.  See <a class="reference internal" href="attribute-syntax.html#attribute-syntax"><em>Attribute Syntax</em></a>, for the exact rules on
attribute syntax and placement.</p>
<p>GCC also supports attributes on
variable declarations (see <a class="reference internal" href="specifying-attributes-of-variables.html#variable-attributes"><em>Specifying Attributes of Variables</em></a>),
labels (see <a class="reference internal" href="label-attributes.html#label-attributes"><em>Label Attributes</em></a>),
and types (see <a class="reference internal" href="specifying-attributes-of-types.html#type-attributes"><em>Specifying Attributes of Types</em></a>).</p>
<p>There is some overlap between the purposes of attributes and pragmas
(see <a class="reference internal" href="pragmas-accepted-by-gcc.html#pragmas"><em>Pragmas Accepted by GCC</em></a>).  It has been
found convenient to use <tt class="docutils literal"><span class="pre">__attribute__</span></tt> to achieve a natural
attachment of attributes to their corresponding declarations, whereas
<tt class="docutils literal"><span class="pre">#pragma</span></tt> is of use for compatibility with other compilers
or constructs that do not naturally form part of the grammar.</p>
<p>In addition to the attributes documented here,
GCC plugins may provide their own attributes.</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="common-function-attributes">
<span id="id1"></span><h2>Common Function Attributes<a class="headerlink" href="#common-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>The following attributes are supported on most targets.</p>
<p>alias (&#8220;<tt class="docutils literal"><span class="pre">target</span></tt>&#8221;)</p>
<blockquote>
<div><p id="index-4">The <tt class="docutils literal"><span class="pre">alias</span></tt> attribute causes the declaration to be emitted as an
alias for another symbol, which must be specified.  For instance,</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">__f</span> <span class="p">()</span> <span class="p">{</span> <span class="cm">/* Do something. */</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">void</span> <span class="nf">f</span> <span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">weak</span><span class="p">,</span> <span class="n">alias</span> <span class="p">(</span><span class="s">&quot;__f&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>defines f to be a weak alias for __f.  In C++, the
mangled name for the target must be used.  It is an error if __f
is not defined in the same translation unit.</p>
<p>This attribute requires assembler and object file support,
and may not be available on all targets.</p>
</div></blockquote>
<p>aligned (<tt class="docutils literal"><span class="pre">alignment</span></tt>)</p>
<blockquote>
<div><p id="index-5">This attribute specifies a minimum alignment for the function,
measured in bytes.</p>
<p>You cannot use this attribute to decrease the alignment of a function,
only to increase it.  However, when you explicitly specify a function
alignment this overrides the effect of the
<a class="reference internal" href="options-that-control-optimization.html#cmdoption-falign-functions"><em class="xref std std-option">-falign-functions</em></a> (see <a class="reference internal" href="options-that-control-optimization.html#optimize-options"><em>Options That Control Optimization</em></a>) option for this
function.</p>
<p>Note that the effectiveness of <tt class="docutils literal"><span class="pre">aligned</span></tt> attributes may be
limited by inherent limitations in your linker.  On many systems, the
linker is only able to arrange for functions to be aligned up to a
certain maximum alignment.  (For some linkers, the maximum supported
alignment may be very very small.)  See your linker documentation for
further information.</p>
<p>The <tt class="docutils literal"><span class="pre">aligned</span></tt> attribute can also be used for variables and fields
(see <a class="reference internal" href="specifying-attributes-of-variables.html#variable-attributes"><em>Specifying Attributes of Variables</em></a>.)</p>
</div></blockquote>
<p>alloc_align</p>
<blockquote>
<div><p id="index-6">The <tt class="docutils literal"><span class="pre">alloc_align</span></tt> attribute is used to tell the compiler that the
function return value points to memory, where the returned pointer minimum
alignment is given by one of the functions parameters.  GCC uses this
information to improve pointer alignment analysis.</p>
<p>The function parameter denoting the allocated alignment is specified by
one integer argument, whose number is the argument of the attribute.
Argument numbering starts at one.</p>
<p>For instance,</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span><span class="o">*</span> <span class="n">my_memalign</span><span class="p">(</span><span class="kt">size_t</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">alloc_align</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
</pre></div>
</div>
<p>declares that <tt class="docutils literal"><span class="pre">my_memalign</span></tt> returns memory with minimum alignment
given by parameter 1.</p>
</div></blockquote>
<p>alloc_size</p>
<blockquote>
<div><p id="index-7">The <tt class="docutils literal"><span class="pre">alloc_size</span></tt> attribute is used to tell the compiler that the
function return value points to memory, where the size is given by
one or two of the functions parameters.  GCC uses this
information to improve the correctness of <tt class="docutils literal"><span class="pre">__builtin_object_size</span></tt>.</p>
<p>The function parameter(s) denoting the allocated size are specified by
one or two integer arguments supplied to the attribute.  The allocated size
is either the value of the single function argument specified or the product
of the two function arguments specified.  Argument numbering starts at
one.</p>
<p>For instance,</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span><span class="o">*</span> <span class="n">my_calloc</span><span class="p">(</span><span class="kt">size_t</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">alloc_size</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)))</span>
<span class="kt">void</span><span class="o">*</span> <span class="n">my_realloc</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">alloc_size</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
</pre></div>
</div>
<p>declares that <tt class="docutils literal"><span class="pre">my_calloc</span></tt> returns memory of the size given by
the product of parameter 1 and 2 and that <tt class="docutils literal"><span class="pre">my_realloc</span></tt> returns memory
of the size given by parameter 2.</p>
</div></blockquote>
<p>always_inline</p>
<blockquote>
<div><p id="index-8">Generally, functions are not inlined unless optimization is specified.
For functions declared inline, this attribute inlines the function
independent of any restrictions that otherwise apply to inlining.
Failure to inline such a function is diagnosed as an error.
Note that if such a function is called indirectly the compiler may
or may not inline it depending on optimization level and a failure
to inline an indirect call may or may not be diagnosed.</p>
</div></blockquote>
<p>artificial</p>
<blockquote>
<div><p id="index-9">This attribute is useful for small inline wrappers that if possible
should appear during debugging as a unit.  Depending on the debug
info format it either means marking the function as artificial
or using the caller location for all instructions within the inlined
body.</p>
</div></blockquote>
<p>assume_aligned</p>
<blockquote>
<div><p id="index-10">The <tt class="docutils literal"><span class="pre">assume_aligned</span></tt> attribute is used to tell the compiler that the
function return value points to memory, where the returned pointer minimum
alignment is given by the first argument.
If the attribute has two arguments, the second argument is misalignment offset.</p>
<p>For instance</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span><span class="o">*</span> <span class="n">my_alloc1</span><span class="p">(</span><span class="kt">size_t</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">assume_aligned</span><span class="p">(</span><span class="mi">16</span><span class="p">)))</span>
<span class="kt">void</span><span class="o">*</span> <span class="n">my_alloc2</span><span class="p">(</span><span class="kt">size_t</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">assume_aligned</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>
</pre></div>
</div>
<p>declares that <tt class="docutils literal"><span class="pre">my_alloc1</span></tt> returns 16-byte aligned pointer and
that <tt class="docutils literal"><span class="pre">my_alloc2</span></tt> returns a pointer whose value modulo 32 is equal
to 8.</p>
</div></blockquote>
<p>bnd_instrument</p>
<blockquote>
<div><p id="index-11">The <tt class="docutils literal"><span class="pre">bnd_instrument</span></tt> attribute on functions is used to inform the
compiler that the function should be instrumented when compiled
with the <a class="reference internal" href="options-for-debugging-your-program-or-gcc.html#cmdoption-fchkp-instrument-marked-only"><em class="xref std std-option">-fchkp-instrument-marked-only</em></a> option.</p>
</div></blockquote>
<p>bnd_legacy</p>
<blockquote>
<div><span class="target" id="index-12"></span><p id="index-13">The <tt class="docutils literal"><span class="pre">bnd_legacy</span></tt> attribute on functions is used to inform the
compiler that the function should not be instrumented when compiled
with the <a class="reference internal" href="options-for-debugging-your-program-or-gcc.html#cmdoption-fcheck-pointer-bounds"><em class="xref std std-option">-fcheck-pointer-bounds</em></a> option.</p>
</div></blockquote>
<p>cold</p>
<blockquote>
<div><p id="index-14">The <tt class="docutils literal"><span class="pre">cold</span></tt> attribute on functions is used to inform the compiler that
the function is unlikely to be executed.  The function is optimized for
size rather than speed and on many targets it is placed into a special
subsection of the text section so all cold functions appear close together,
improving code locality of non-cold parts of program.  The paths leading
to calls of cold functions within code are marked as unlikely by the branch
prediction mechanism.  It is thus useful to mark functions used to handle
unlikely conditions, such as <tt class="docutils literal"><span class="pre">perror</span></tt>, as cold to improve optimization
of hot functions that do call marked functions in rare occasions.</p>
<p>When profile feedback is available, via <a class="reference internal" href="options-that-control-optimization.html#cmdoption-fprofile-use"><em class="xref std std-option">-fprofile-use</em></a>, cold functions
are automatically detected and this attribute is ignored.</p>
</div></blockquote>
<p>const</p>
<blockquote>
<div><span class="target" id="index-15"></span><p id="index-16">Many functions do not examine any values except their arguments, and
have no effects except the return value.  Basically this is just slightly
more strict class than the <tt class="docutils literal"><span class="pre">pure</span></tt> attribute below, since function is not
allowed to read global memory.</p>
<p id="index-17">Note that a function that has pointer arguments and examines the data
pointed to must <em>not</em> be declared <tt class="docutils literal"><span class="pre">const</span></tt>.  Likewise, a
function that calls a non-<tt class="docutils literal"><span class="pre">const</span></tt> function usually must not be
<tt class="docutils literal"><span class="pre">const</span></tt>.  It does not make sense for a <tt class="docutils literal"><span class="pre">const</span></tt> function to
return <tt class="docutils literal"><span class="pre">void</span></tt>.</p>
</div></blockquote>
<p>constructor destructor constructor (<tt class="docutils literal"><span class="pre">priority</span></tt>) destructor (<tt class="docutils literal"><span class="pre">priority</span></tt>)</p>
<blockquote>
<div><span class="target" id="index-18"></span><p id="index-19">The <tt class="docutils literal"><span class="pre">constructor</span></tt> attribute causes the function to be called
automatically before execution enters <tt class="docutils literal"><span class="pre">main</span> <span class="pre">()</span></tt>.  Similarly, the
<tt class="docutils literal"><span class="pre">destructor</span></tt> attribute causes the function to be called
automatically after <tt class="docutils literal"><span class="pre">main</span> <span class="pre">()</span></tt> completes or <tt class="docutils literal"><span class="pre">exit</span> <span class="pre">()</span></tt> is
called.  Functions with these attributes are useful for
initializing data that is used implicitly during the execution of
the program.</p>
<p>You may provide an optional integer priority to control the order in
which constructor and destructor functions are run.  A constructor
with a smaller priority number runs before a constructor with a larger
priority number; the opposite relationship holds for destructors.  So,
if you have a constructor that allocates a resource and a destructor
that deallocates the same resource, both functions typically have the
same priority.  The priorities for constructor and destructor
functions are the same as those specified for namespace-scope C++
objects (see <a class="reference internal" href="c++-specific-variable,-function,-and-type-attributes.html#c-attributes"><em>C++-Specific Variable, Function, and Type Attributes</em></a>).</p>
<p>These attributes are not currently implemented for Objective-C.</p>
</div></blockquote>
<p>deprecated deprecated (<tt class="docutils literal"><span class="pre">msg</span></tt>)</p>
<blockquote>
<div><p id="index-20">The <tt class="docutils literal"><span class="pre">deprecated</span></tt> attribute results in a warning if the function
is used anywhere in the source file.  This is useful when identifying
functions that are expected to be removed in a future version of a
program.  The warning also includes the location of the declaration
of the deprecated function, to enable users to easily find further
information about why the function is deprecated, or what they should
do instead.  Note that the warnings only occurs for uses:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">int</span> <span class="nf">old_fn</span> <span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">deprecated</span><span class="p">));</span>
<span class="kt">int</span> <span class="nf">old_fn</span> <span class="p">();</span>
<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">fn_ptr</span><span class="p">)()</span> <span class="o">=</span> <span class="n">old_fn</span><span class="p">;</span>
</pre></div>
</div>
<p>results in a warning on line 3 but not line 2.  The optional <tt class="docutils literal"><span class="pre">msg</span></tt>
argument, which must be a string, is printed in the warning if
present.</p>
<p>The <tt class="docutils literal"><span class="pre">deprecated</span></tt> attribute can also be used for variables and
types (see <a class="reference internal" href="specifying-attributes-of-variables.html#variable-attributes"><em>Specifying Attributes of Variables</em></a>, see <a class="reference internal" href="specifying-attributes-of-types.html#type-attributes"><em>Specifying Attributes of Types</em></a>.)</p>
</div></blockquote>
<p>error (&#8220;<tt class="docutils literal"><span class="pre">message</span></tt>&#8221;) warning (&#8220;<tt class="docutils literal"><span class="pre">message</span></tt>&#8221;)</p>
<blockquote>
<div><span class="target" id="index-21"></span><p id="index-22">If the <tt class="docutils literal"><span class="pre">error</span></tt> or <tt class="docutils literal"><span class="pre">warning</span></tt> attribute
is used on a function declaration and a call to such a function
is not eliminated through dead code elimination or other optimizations,
an error or warning (respectively) that includes <tt class="docutils literal"><span class="pre">message</span></tt> is diagnosed.
This is useful
for compile-time checking, especially together with <tt class="docutils literal"><span class="pre">__builtin_constant_p</span></tt>
and inline functions where checking the inline function arguments is not
possible through <tt class="docutils literal"><span class="pre">extern</span> <span class="pre">char</span> <span class="pre">[(condition)</span> <span class="pre">?</span> <span class="pre">1</span> <span class="pre">:</span> <span class="pre">-1];</span></tt> tricks.</p>
<p>While it is possible to leave the function undefined and thus invoke
a link failure (to define the function with
a message in <tt class="docutils literal"><span class="pre">.gnu.warning*</span></tt> section),
when using these attributes the problem is diagnosed
earlier and with exact location of the call even in presence of inline
functions or when not emitting debugging information.</p>
</div></blockquote>
<p>externally_visible</p>
<blockquote>
<div><p id="index-23">This attribute, attached to a global variable or function, nullifies
the effect of the <a class="reference internal" href="options-that-control-optimization.html#cmdoption-fwhole-program"><em class="xref std std-option">-fwhole-program</em></a> command-line option, so the
object remains visible outside the current compilation unit.</p>
<p>If <a class="reference internal" href="options-that-control-optimization.html#cmdoption-fwhole-program"><em class="xref std std-option">-fwhole-program</em></a> is used together with <a class="reference internal" href="options-that-control-optimization.html#cmdoption-flto"><em class="xref std std-option">-flto</em></a> and
<strong class="command">gold</strong> is used as the linker plugin,
<tt class="docutils literal"><span class="pre">externally_visible</span></tt> attributes are automatically added to functions
(not variable yet due to a current <strong class="command">gold</strong> issue)
that are accessed outside of LTO objects according to resolution file
produced by <strong class="command">gold</strong>.
For other linkers that cannot generate resolution file,
explicit <tt class="docutils literal"><span class="pre">externally_visible</span></tt> attributes are still necessary.</p>
</div></blockquote>
<p>flatten</p>
<blockquote>
<div><p id="index-24">Generally, inlining into a function is limited.  For a function marked with
this attribute, every call inside this function is inlined, if possible.
Whether the function itself is considered for inlining depends on its size and
the current inlining parameters.</p>
</div></blockquote>
<dl class="option">
<dt id="cmdoption-index">
<tt class="descname">-index</tt><tt class="descclassname">, first-to-check)</tt><tt class="descclassname">, </tt><tt class="descname">-Wformat</tt><tt class="descclassname"></tt><tt class="descclassname">, </tt><tt class="descname">-ffreestanding</tt><tt class="descclassname"></tt><tt class="descclassname">, </tt><tt class="descname">-fno-builtin</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-index" title="Permalink to this definition">¶</a></dt>
<dd><span class="target" id="index-25"></span><p id="index-26">The <tt class="docutils literal"><span class="pre">format</span></tt> attribute specifies that a function takes <tt class="docutils literal"><span class="pre">printf</span></tt>,
<tt class="docutils literal"><span class="pre">scanf</span></tt>, <tt class="docutils literal"><span class="pre">strftime</span></tt> or <tt class="docutils literal"><span class="pre">strfmon</span></tt> style arguments that
should be type-checked against a format string.  For example, the
declaration:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">int</span>
<span class="nf">my_printf</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">my_object</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">my_format</span><span class="p">,</span> <span class="p">...)</span>
      <span class="n">__attribute__</span> <span class="p">((</span><span class="n">format</span> <span class="p">(</span><span class="n">printf</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)));</span>
</pre></div>
</div>
<p>causes the compiler to check the arguments in calls to <tt class="docutils literal"><span class="pre">my_printf</span></tt>
for consistency with the <tt class="docutils literal"><span class="pre">printf</span></tt> style format string argument
<tt class="docutils literal"><span class="pre">my_format</span></tt>.</p>
<p>The parameter <tt class="docutils literal"><span class="pre">archetype</span></tt> determines how the format string is
interpreted, and should be <tt class="docutils literal"><span class="pre">printf</span></tt>, <tt class="docutils literal"><span class="pre">scanf</span></tt>, <tt class="docutils literal"><span class="pre">strftime</span></tt>,
<tt class="docutils literal"><span class="pre">gnu_printf</span></tt>, <tt class="docutils literal"><span class="pre">gnu_scanf</span></tt>, <tt class="docutils literal"><span class="pre">gnu_strftime</span></tt> or
<tt class="docutils literal"><span class="pre">strfmon</span></tt>.  (You can also use <tt class="docutils literal"><span class="pre">__printf__</span></tt>,
<tt class="docutils literal"><span class="pre">__scanf__</span></tt>, <tt class="docutils literal"><span class="pre">__strftime__</span></tt> or <tt class="docutils literal"><span class="pre">__strfmon__</span></tt>.)  On
MinGW targets, <tt class="docutils literal"><span class="pre">ms_printf</span></tt>, <tt class="docutils literal"><span class="pre">ms_scanf</span></tt>, and
<tt class="docutils literal"><span class="pre">ms_strftime</span></tt> are also present.
<tt class="docutils literal"><span class="pre">archetype</span></tt> values such as <tt class="docutils literal"><span class="pre">printf</span></tt> refer to the formats accepted
by the system&#8217;s C runtime library,
while values prefixed with <a href="#id31"><span class="problematic" id="id32">gnu_</span></a> always refer
to the formats accepted by the GNU C Library.  On Microsoft Windows
targets, values prefixed with <a href="#id33"><span class="problematic" id="id34">ms_</span></a> refer to the formats accepted by the
msvcrt.dll library.
The parameter <tt class="docutils literal"><span class="pre">string-index</span></tt>
specifies which argument is the format string argument (starting
from 1), while <tt class="docutils literal"><span class="pre">first-to-check</span></tt> is the number of the first
argument to check against the format string.  For functions
where the arguments are not available to be checked (such as
<tt class="docutils literal"><span class="pre">vprintf</span></tt>), specify the third parameter as zero.  In this case the
compiler only checks the format string for consistency.  For
<tt class="docutils literal"><span class="pre">strftime</span></tt> formats, the third parameter is required to be zero.
Since non-static C++ methods have an implicit <tt class="docutils literal"><span class="pre">this</span></tt> argument, the
arguments of such methods should be counted from two, not one, when
giving values for <tt class="docutils literal"><span class="pre">string-index</span></tt> and <tt class="docutils literal"><span class="pre">first-to-check</span></tt>.</p>
<p>In the example above, the format string (<tt class="docutils literal"><span class="pre">my_format</span></tt>) is the second
argument of the function <tt class="docutils literal"><span class="pre">my_print</span></tt>, and the arguments to check
start with the third argument, so the correct parameters for the format
attribute are 2 and 3.</p>
<p>The <tt class="docutils literal"><span class="pre">format</span></tt> attribute allows you to identify your own functions
that take format strings as arguments, so that GCC can check the
calls to these functions for errors.  The compiler always (unless
<a class="reference internal" href="options-controlling-c-dialect.html#cmdoption-ffreestanding"><em class="xref std std-option">-ffreestanding</em></a> or <a class="reference internal" href="options-controlling-c-dialect.html#cmdoption-fno-builtin"><em class="xref std std-option">-fno-builtin</em></a> is used) checks formats
for the standard library functions <tt class="docutils literal"><span class="pre">printf</span></tt>, <tt class="docutils literal"><span class="pre">fprintf</span></tt>,
<tt class="docutils literal"><span class="pre">sprintf</span></tt>, <tt class="docutils literal"><span class="pre">scanf</span></tt>, <tt class="docutils literal"><span class="pre">fscanf</span></tt>, <tt class="docutils literal"><span class="pre">sscanf</span></tt>, <tt class="docutils literal"><span class="pre">strftime</span></tt>,
<tt class="docutils literal"><span class="pre">vprintf</span></tt>, <tt class="docutils literal"><span class="pre">vfprintf</span></tt> and <tt class="docutils literal"><span class="pre">vsprintf</span></tt> whenever such
warnings are requested (using <a class="reference internal" href="options-to-request-or-suppress-warnings.html#cmdoption-Wformat"><em class="xref std std-option">-Wformat</em></a>), so there is no need to
modify the header file stdio.h.  In C99 mode, the functions
<tt class="docutils literal"><span class="pre">snprintf</span></tt>, <tt class="docutils literal"><span class="pre">vsnprintf</span></tt>, <tt class="docutils literal"><span class="pre">vscanf</span></tt>, <tt class="docutils literal"><span class="pre">vfscanf</span></tt> and
<tt class="docutils literal"><span class="pre">vsscanf</span></tt> are also checked.  Except in strictly conforming C
standard modes, the X/Open function <tt class="docutils literal"><span class="pre">strfmon</span></tt> is also checked as
are <tt class="docutils literal"><span class="pre">printf_unlocked</span></tt> and <tt class="docutils literal"><span class="pre">fprintf_unlocked</span></tt>.
See <a class="reference internal" href="options-controlling-c-dialect.html#c-dialect-options"><em>Options Controlling C Dialect</em></a>.</p>
<p>For Objective-C dialects, <tt class="docutils literal"><span class="pre">NSString</span></tt> (or <tt class="docutils literal"><span class="pre">__NSString__</span></tt>) is
recognized in the same context.  Declarations including these format attributes
are parsed for correct syntax, however the result of checking of such format
strings is not yet defined, and is not carried out by this version of the
compiler.</p>
<p>The target may also provide additional types of format checks.
See <a class="reference internal" href="format-checks-specific-to-particular-target-machines.html#target-format-checks"><em>Format Checks Specific to Particular
Target Machines</em></a>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-index">
<tt class="descname">-index</tt><tt class="descclassname">)</tt><tt class="descclassname">, </tt><tt class="descname">-Wformat-nonliteral</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-index" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-27">The <tt class="docutils literal"><span class="pre">format_arg</span></tt> attribute specifies that a function takes a format
string for a <tt class="docutils literal"><span class="pre">printf</span></tt>, <tt class="docutils literal"><span class="pre">scanf</span></tt>, <tt class="docutils literal"><span class="pre">strftime</span></tt> or
<tt class="docutils literal"><span class="pre">strfmon</span></tt> style function and modifies it (for example, to translate
it into another language), so the result can be passed to a
<tt class="docutils literal"><span class="pre">printf</span></tt>, <tt class="docutils literal"><span class="pre">scanf</span></tt>, <tt class="docutils literal"><span class="pre">strftime</span></tt> or <tt class="docutils literal"><span class="pre">strfmon</span></tt> style
function (with the remaining arguments to the format function the same
as they would have been for the unmodified string).  For example, the
declaration:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span>
<span class="nf">my_dgettext</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">my_domain</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">my_format</span><span class="p">)</span>
      <span class="n">__attribute__</span> <span class="p">((</span><span class="n">format_arg</span> <span class="p">(</span><span class="mi">2</span><span class="p">)));</span>
</pre></div>
</div>
<p>causes the compiler to check the arguments in calls to a <tt class="docutils literal"><span class="pre">printf</span></tt>,
<tt class="docutils literal"><span class="pre">scanf</span></tt>, <tt class="docutils literal"><span class="pre">strftime</span></tt> or <tt class="docutils literal"><span class="pre">strfmon</span></tt> type function, whose
format string argument is a call to the <tt class="docutils literal"><span class="pre">my_dgettext</span></tt> function, for
consistency with the format string argument <tt class="docutils literal"><span class="pre">my_format</span></tt>.  If the
<tt class="docutils literal"><span class="pre">format_arg</span></tt> attribute had not been specified, all the compiler
could tell in such calls to format functions would be that the format
string argument is not constant; this would generate a warning when
<a class="reference internal" href="options-to-request-or-suppress-warnings.html#cmdoption-Wformat-nonliteral"><em class="xref std std-option">-Wformat-nonliteral</em></a> is used, but the calls could not be checked
without the attribute.</p>
<p>The parameter <tt class="docutils literal"><span class="pre">string-index</span></tt> specifies which argument is the format
string argument (starting from one).  Since non-static C++ methods have
an implicit <tt class="docutils literal"><span class="pre">this</span></tt> argument, the arguments of such methods should
be counted from two.</p>
<p>The <tt class="docutils literal"><span class="pre">format_arg</span></tt> attribute allows you to identify your own
functions that modify format strings, so that GCC can check the
calls to <tt class="docutils literal"><span class="pre">printf</span></tt>, <tt class="docutils literal"><span class="pre">scanf</span></tt>, <tt class="docutils literal"><span class="pre">strftime</span></tt> or <tt class="docutils literal"><span class="pre">strfmon</span></tt>
type function whose operands are a call to one of your own function.
The compiler always treats <tt class="docutils literal"><span class="pre">gettext</span></tt>, <tt class="docutils literal"><span class="pre">dgettext</span></tt>, and
<tt class="docutils literal"><span class="pre">dcgettext</span></tt> in this manner except when strict ISO C support is
requested by <a class="reference internal" href="options-controlling-c-dialect.html#cmdoption-ansi"><em class="xref std std-option">-ansi</em></a> or an appropriate <a class="reference internal" href="options-controlling-the-preprocessor.html#cmdoption-std"><em class="xref std std-option">-std</em></a> option, or
<a class="reference internal" href="options-controlling-c-dialect.html#cmdoption-ffreestanding"><em class="xref std std-option">-ffreestanding</em></a> or <a class="reference internal" href="options-controlling-c-dialect.html#cmdoption-fno-builtin"><em class="xref std std-option">-fno-builtin</em></a>
is used.  See <a class="reference internal" href="options-controlling-c-dialect.html#c-dialect-options"><em>Options
Controlling C Dialect</em></a>.</p>
<p>For Objective-C dialects, the <tt class="docutils literal"><span class="pre">format-arg</span></tt> attribute may refer to an
<tt class="docutils literal"><span class="pre">NSString</span></tt> reference for compatibility with the <tt class="docutils literal"><span class="pre">format</span></tt> attribute
above.</p>
<p>The target may also allow additional types in <tt class="docutils literal"><span class="pre">format-arg</span></tt> attributes.
See <a class="reference internal" href="format-checks-specific-to-particular-target-machines.html#target-format-checks"><em>Format Checks Specific to Particular
Target Machines</em></a>.</p>
</dd></dl>

<p>gnu_inline</p>
<blockquote>
<div><p id="index-28">This attribute should be used with a function that is also declared
with the <tt class="docutils literal"><span class="pre">inline</span></tt> keyword.  It directs GCC to treat the function
as if it were defined in gnu90 mode even when compiling in C99 or
gnu99 mode.</p>
<p>If the function is declared <tt class="docutils literal"><span class="pre">extern</span></tt>, then this definition of the
function is used only for inlining.  In no case is the function
compiled as a standalone function, not even if you take its address
explicitly.  Such an address becomes an external reference, as if you
had only declared the function, and had not defined it.  This has
almost the effect of a macro.  The way to use this is to put a
function definition in a header file with this attribute, and put
another copy of the function, without <tt class="docutils literal"><span class="pre">extern</span></tt>, in a library
file.  The definition in the header file causes most calls to the
function to be inlined.  If any uses of the function remain, they
refer to the single copy in the library.  Note that the two
definitions of the functions need not be precisely the same, although
if they do not have the same effect your program may behave oddly.</p>
<p>In C, if the function is neither <tt class="docutils literal"><span class="pre">extern</span></tt> nor <tt class="docutils literal"><span class="pre">static</span></tt>, then
the function is compiled as a standalone function, as well as being
inlined where possible.</p>
<p>This is how GCC traditionally handled functions declared
<tt class="docutils literal"><span class="pre">inline</span></tt>.  Since ISO C99 specifies a different semantics for
<tt class="docutils literal"><span class="pre">inline</span></tt>, this function attribute is provided as a transition
measure and as a useful feature in its own right.  This attribute is
available in GCC 4.1.3 and later.  It is available if either of the
preprocessor macros <tt class="docutils literal"><span class="pre">__GNUC_GNU_INLINE__</span></tt> or
<tt class="docutils literal"><span class="pre">__GNUC_STDC_INLINE__</span></tt> are defined.  See <a class="reference internal" href="an-inline-function-is-as-fast-as-a-macro.html#inline"><em>An Inline
Function is As Fast As a Macro</em></a>.</p>
<p>In C++, this attribute does not depend on <tt class="docutils literal"><span class="pre">extern</span></tt> in any way,
but it still requires the <tt class="docutils literal"><span class="pre">inline</span></tt> keyword to enable its special
behavior.</p>
</div></blockquote>
<p>hot</p>
<blockquote>
<div><p id="index-29">The <tt class="docutils literal"><span class="pre">hot</span></tt> attribute on a function is used to inform the compiler that
the function is a hot spot of the compiled program.  The function is
optimized more aggressively and on many targets it is placed into a special
subsection of the text section so all hot functions appear close together,
improving locality.</p>
<p>When profile feedback is available, via <a class="reference internal" href="options-that-control-optimization.html#cmdoption-fprofile-use"><em class="xref std std-option">-fprofile-use</em></a>, hot functions
are automatically detected and this attribute is ignored.</p>
</div></blockquote>
<p>ifunc (&#8220;<tt class="docutils literal"><span class="pre">resolver</span></tt>&#8221;)</p>
<blockquote>
<div><span class="target" id="index-30"></span><span class="target" id="index-31"></span><p id="index-32">The <tt class="docutils literal"><span class="pre">ifunc</span></tt> attribute is used to mark a function as an indirect
function using the STT_GNU_IFUNC symbol type extension to the ELF
standard.  This allows the resolution of the symbol value to be
determined dynamically at load time, and an optimized version of the
routine can be selected for the particular processor or other system
characteristics determined then.  To use this attribute, first define
the implementation functions available, and a resolver function that
returns a pointer to the selected implementation function.  The
implementation functions&#8217; declarations must match the API of the
function being implemented, the resolver&#8217;s declaration is be a
function returning pointer to void function returning void:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="o">*</span><span class="nf">my_memcpy</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">dst</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="k">static</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="n">resolve_memcpy</span> <span class="p">(</span><span class="kt">void</span><span class="p">))</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="n">my_memcpy</span><span class="p">;</span> <span class="c1">// we&#39;ll just always select this routine</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The exported header file declaring the function the user calls would
contain:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span><span class="nf">memcpy</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
</pre></div>
</div>
<p>allowing the user to call this as a regular function, unaware of the
implementation.  Finally, the indirect function needs to be defined in
the same translation unit as the resolver function:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="o">*</span><span class="nf">memcpy</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">)</span>
     <span class="n">__attribute__</span> <span class="p">((</span><span class="n">ifunc</span> <span class="p">(</span><span class="s">&quot;resolve_memcpy&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>Indirect functions cannot be weak.  Binutils version 2.20.1 or higher
and GNU C Library version 2.11.1 are required to use this feature.</p>
</div></blockquote>
<dl class="docutils">
<dt>interrupt interrupt_handler</dt>
<dd>Many GCC back ends support attributes to indicate that a function is
an interrupt handler, which tells the compiler to generate function
entry and exit sequences that differ from those from regular
functions.  The exact syntax and behavior are target-specific;
refer to the following subsections for details.</dd>
</dl>
<p>leaf</p>
<blockquote>
<div><p id="index-33">Calls to external functions with this attribute must return to the current
compilation unit only by return or by exception handling.  In particular, leaf
functions are not allowed to call callback function passed to it from the current
compilation unit or directly call functions exported by the unit or longjmp
into the unit.  Leaf function might still call functions from other compilation
units and thus they are not necessarily leaf in the sense that they contain no
function calls at all.</p>
<p>The attribute is intended for library functions to improve dataflow analysis.
The compiler takes the hint that any data not escaping the current compilation unit can
not be used or modified by the leaf function.  For example, the <tt class="docutils literal"><span class="pre">sin</span></tt> function
is a leaf function, but <tt class="docutils literal"><span class="pre">qsort</span></tt> is not.</p>
<p>Note that leaf functions might invoke signals and signal handlers might be
defined in the current compilation unit and use static variables.  The only
compliant way to write such a signal handler is to declare such variables
<tt class="docutils literal"><span class="pre">volatile</span></tt>.</p>
<p>The attribute has no effect on functions defined within the current compilation
unit.  This is to allow easy merging of multiple compilation units into one,
for example, by using the link-time optimization.  For this reason the
attribute is not allowed on types to annotate indirect calls.</p>
</div></blockquote>
<p>malloc</p>
<blockquote>
<div><span class="target" id="index-34"></span><p id="index-35">This tells the compiler that a function is <tt class="docutils literal"><span class="pre">malloc</span></tt>-like, i.e.,
that the pointer <tt class="docutils literal"><span class="pre">P</span></tt> returned by the function cannot alias any
other pointer valid when the function returns, and moreover no
pointers to valid objects occur in any storage addressed by <tt class="docutils literal"><span class="pre">P</span></tt>.</p>
<p>Using this attribute can improve optimization.  Functions like
<tt class="docutils literal"><span class="pre">malloc</span></tt> and <tt class="docutils literal"><span class="pre">calloc</span></tt> have this property because they return
a pointer to uninitialized or zeroed-out storage.  However, functions
like <tt class="docutils literal"><span class="pre">realloc</span></tt> do not have this property, as they can return a
pointer to storage containing pointers.</p>
</div></blockquote>
<p>no_icf</p>
<blockquote>
<div><p id="index-36">This function attribute prevents a functions from being merged with another
semantically equivalent function.</p>
</div></blockquote>
<dl class="option">
<dt id="cmdoption-finstrument-functions">
<tt class="descname">-finstrument-functions</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-finstrument-functions" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-37">If <a class="reference internal" href="options-for-code-generation-conventions.html#cmdoption-finstrument-functions"><em class="xref std std-option">-finstrument-functions</em></a> is given, profiling function calls are
generated at entry and exit of most user-compiled functions.
Functions with this attribute are not so instrumented.</p>
</dd></dl>

<p>no_reorder</p>
<blockquote>
<div><p id="index-38">Do not reorder functions or variables marked <tt class="docutils literal"><span class="pre">no_reorder</span></tt>
against each other or top level assembler statements the executable.
The actual order in the program will depend on the linker command
line. Static variables marked like this are also not removed.
This has a similar effect
as the <a class="reference internal" href="options-that-control-optimization.html#cmdoption-fno-toplevel-reorder"><em class="xref std std-option">-fno-toplevel-reorder</em></a> option, but only applies to the
marked symbols.</p>
</div></blockquote>
<p>no_sanitize_address no_address_safety_analysis</p>
<blockquote>
<div><p id="index-39">The <tt class="docutils literal"><span class="pre">no_sanitize_address</span></tt> attribute on functions is used
to inform the compiler that it should not instrument memory accesses
in the function when compiling with the <em class="xref std std-option">-fsanitize=address</em> option.
The <tt class="docutils literal"><span class="pre">no_address_safety_analysis</span></tt> is a deprecated alias of the
<tt class="docutils literal"><span class="pre">no_sanitize_address</span></tt> attribute, new code should use
<tt class="docutils literal"><span class="pre">no_sanitize_address</span></tt>.</p>
</div></blockquote>
<p>no_sanitize_thread</p>
<blockquote>
<div><p id="index-40">The <tt class="docutils literal"><span class="pre">no_sanitize_thread</span></tt> attribute on functions is used
to inform the compiler that it should not instrument memory accesses
in the function when compiling with the <em class="xref std std-option">-fsanitize=thread</em> option.</p>
</div></blockquote>
<p>no_sanitize_undefined</p>
<blockquote>
<div><p id="index-41">The <tt class="docutils literal"><span class="pre">no_sanitize_undefined</span></tt> attribute on functions is used
to inform the compiler that it should not check for undefined behavior
in the function when compiling with the <em class="xref std std-option">-fsanitize=undefined</em> option.</p>
</div></blockquote>
<dl class="option">
<dt id="cmdoption-fsplit-stack">
<tt class="descname">-fsplit-stack</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fsplit-stack" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-42">If <a class="reference internal" href="options-for-code-generation-conventions.html#cmdoption-fsplit-stack"><em class="xref std std-option">-fsplit-stack</em></a> is given, functions have a small
prologue which decides whether to split the stack.  Functions with the
<tt class="docutils literal"><span class="pre">no_split_stack</span></tt> attribute do not have that prologue, and thus
may run with only a small amount of stack space available.</p>
</dd></dl>

<p>noclone</p>
<blockquote>
<div><p id="index-43">This function attribute prevents a function from being considered for
cloning-a mechanism that produces specialized copies of functions
and which is (currently) performed by interprocedural constant
propagation.</p>
</div></blockquote>
<p>noinline</p>
<blockquote>
<div><p id="index-44">This function attribute prevents a function from being considered for
inlining.</p>
<p>If the function does not have side-effects, there are optimizations
other than inlining that cause function calls to be optimized away,
although the function call is live.  To keep such calls from being
optimized away, put</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">asm</span> <span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>(see <a class="reference internal" href="how-to-use-inline-assembly-language-in-c-code.html#extended-asm"><em>Extended Asm - Assembler Instructions with C Expression Operands</em></a>) in the called function, to serve as a special
side-effect.</p>
</div></blockquote>
<p>nonnull (<tt class="docutils literal"><span class="pre">arg-index</span></tt>, ...)</p>
<blockquote>
<div><span class="target" id="index-45"></span><p id="index-46">The <tt class="docutils literal"><span class="pre">nonnull</span></tt> attribute specifies that some function parameters should
be non-null pointers.  For instance, the declaration:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span>
<span class="nf">my_memcpy</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">dest</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">)</span>
        <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)));</span>
</pre></div>
</div>
<p>causes the compiler to check that, in calls to <tt class="docutils literal"><span class="pre">my_memcpy</span></tt>,
arguments <tt class="docutils literal"><span class="pre">dest</span></tt> and <tt class="docutils literal"><span class="pre">src</span></tt> are non-null.  If the compiler
determines that a null pointer is passed in an argument slot marked
as non-null, and the <a class="reference internal" href="options-to-request-or-suppress-warnings.html#cmdoption-Wnonnull"><em class="xref std std-option">-Wnonnull</em></a> option is enabled, a warning
is issued.  The compiler may also choose to make optimizations based
on the knowledge that certain function arguments will never be null.</p>
<p>If no argument index list is given to the <tt class="docutils literal"><span class="pre">nonnull</span></tt> attribute,
all pointer arguments are marked as non-null.  To illustrate, the
following declaration is equivalent to the previous example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span>
<span class="nf">my_memcpy</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">dest</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">)</span>
        <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span><span class="p">));</span>
</pre></div>
</div>
</div></blockquote>
<p>noreturn</p>
<blockquote>
<div><span class="target" id="index-47"></span><p id="index-48">A few standard library functions, such as <tt class="docutils literal"><span class="pre">abort</span></tt> and <tt class="docutils literal"><span class="pre">exit</span></tt>,
cannot return.  GCC knows this automatically.  Some programs define
their own functions that never return.  You can declare them
<tt class="docutils literal"><span class="pre">noreturn</span></tt> to tell the compiler this fact.  For example,</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">fatal</span> <span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">noreturn</span><span class="p">));</span>

<span class="kt">void</span>
<span class="nf">fatal</span> <span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span>
<span class="p">{</span>
  <span class="cm">/* ... */</span> <span class="cm">/* Print error message. */</span> <span class="cm">/* ... */</span>
  <span class="n">exit</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">noreturn</span></tt> keyword tells the compiler to assume that
<tt class="docutils literal"><span class="pre">fatal</span></tt> cannot return.  It can then optimize without regard to what
would happen if <tt class="docutils literal"><span class="pre">fatal</span></tt> ever did return.  This makes slightly
better code.  More importantly, it helps avoid spurious warnings of
uninitialized variables.</p>
<p>The <tt class="docutils literal"><span class="pre">noreturn</span></tt> keyword does not affect the exceptional path when that
applies: a <tt class="docutils literal"><span class="pre">noreturn</span></tt>-marked function may still return to the caller
by throwing an exception or calling <tt class="docutils literal"><span class="pre">longjmp</span></tt>.</p>
<p>Do not assume that registers saved by the calling function are
restored before calling the <tt class="docutils literal"><span class="pre">noreturn</span></tt> function.</p>
<p>It does not make sense for a <tt class="docutils literal"><span class="pre">noreturn</span></tt> function to have a return
type other than <tt class="docutils literal"><span class="pre">void</span></tt>.</p>
</div></blockquote>
<p>nothrow</p>
<blockquote>
<div><p id="index-49">The <tt class="docutils literal"><span class="pre">nothrow</span></tt> attribute is used to inform the compiler that a
function cannot throw an exception.  For example, most functions in
the standard C library can be guaranteed not to throw an exception
with the notable exceptions of <tt class="docutils literal"><span class="pre">qsort</span></tt> and <tt class="docutils literal"><span class="pre">bsearch</span></tt> that
take function pointer arguments.</p>
</div></blockquote>
<p>optimize</p>
<blockquote>
<div><p id="index-50">The <tt class="docutils literal"><span class="pre">optimize</span></tt> attribute is used to specify that a function is to
be compiled with different optimization options than specified on the
command line.  Arguments can either be numbers or strings.  Numbers
are assumed to be an optimization level.  Strings that begin with
<tt class="docutils literal"><span class="pre">O</span></tt> are assumed to be an optimization option, while other options
are assumed to be used with a <tt class="docutils literal"><span class="pre">-f</span></tt> prefix.  You can also use the
#pragma GCC optimize pragma to set the optimization options
that affect more than one function.
See <a class="reference internal" href="pragmas-accepted-by-gcc.html#function-specific-option-pragmas"><em>Function Specific Option Pragmas</em></a>, for details about the
#pragma GCC optimize pragma.</p>
<p>This can be used for instance to have frequently-executed functions
compiled with more aggressive optimization options that produce faster
and larger code, while other functions can be compiled with less
aggressive options.</p>
</div></blockquote>
<p>pure</p>
<blockquote>
<div><span class="target" id="index-51"></span><p id="index-52">Many functions have no effects except the return value and their
return value depends only on the parameters and/or global variables.
Such a function can be subject
to common subexpression elimination and loop optimization just as an
arithmetic operator would be.  These functions should be declared
with the attribute <tt class="docutils literal"><span class="pre">pure</span></tt>.  For example,</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">int</span> <span class="nf">square</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">pure</span><span class="p">));</span>
</pre></div>
</div>
<p>says that the hypothetical function <tt class="docutils literal"><span class="pre">square</span></tt> is safe to call
fewer times than the program says.</p>
<p>Some of common examples of pure functions are <tt class="docutils literal"><span class="pre">strlen</span></tt> or <tt class="docutils literal"><span class="pre">memcmp</span></tt>.
Interesting non-pure functions are functions with infinite loops or those
depending on volatile memory or other system resource, that may change between
two consecutive calls (such as <tt class="docutils literal"><span class="pre">feof</span></tt> in a multithreading environment).</p>
</div></blockquote>
<p>returns_nonnull</p>
<blockquote>
<div><p id="index-53">The <tt class="docutils literal"><span class="pre">returns_nonnull</span></tt> attribute specifies that the function
return value should be a non-null pointer.  For instance, the declaration:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span>
<span class="nf">mymalloc</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">len</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">returns_nonnull</span><span class="p">));</span>
</pre></div>
</div>
<p>lets the compiler optimize callers based on the knowledge
that the return value will never be null.</p>
</div></blockquote>
<p>returns_twice</p>
<blockquote>
<div><span class="target" id="index-54"></span><p id="index-55">The <tt class="docutils literal"><span class="pre">returns_twice</span></tt> attribute tells the compiler that a function may
return more than one time.  The compiler ensures that all registers
are dead before calling such a function and emits a warning about
the variables that may be clobbered after the second return from the
function.  Examples of such functions are <tt class="docutils literal"><span class="pre">setjmp</span></tt> and <tt class="docutils literal"><span class="pre">vfork</span></tt>.
The <tt class="docutils literal"><span class="pre">longjmp</span></tt>-like counterpart of such function, if any, might need
to be marked with the <tt class="docutils literal"><span class="pre">noreturn</span></tt> attribute.</p>
</div></blockquote>
<p>section (&#8220;<tt class="docutils literal"><span class="pre">section-name</span></tt>&#8221;)</p>
<blockquote>
<div><span class="target" id="index-56"></span><p id="index-57">Normally, the compiler places the code it generates in the <tt class="docutils literal"><span class="pre">text</span></tt> section.
Sometimes, however, you need additional sections, or you need certain
particular functions to appear in special sections.  The <tt class="docutils literal"><span class="pre">section</span></tt>
attribute specifies that a function lives in a particular section.
For example, the declaration:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="nf">foobar</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">section</span> <span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>puts the function <tt class="docutils literal"><span class="pre">foobar</span></tt> in the <tt class="docutils literal"><span class="pre">bar</span></tt> section.</p>
<p>Some file formats do not support arbitrary sections so the <tt class="docutils literal"><span class="pre">section</span></tt>
attribute is not available on all platforms.
If you need to map the entire contents of a module to a particular
section, consider using the facilities of the linker instead.</p>
</div></blockquote>
<p>sentinel</p>
<blockquote>
<div><p id="index-58">This function attribute ensures that a parameter in a function call is
an explicit <tt class="docutils literal"><span class="pre">NULL</span></tt>.  The attribute is only valid on variadic
functions.  By default, the sentinel is located at position zero, the
last parameter of the function call.  If an optional integer position
argument P is supplied to the attribute, the sentinel must be located at
position P counting backwards from the end of the argument list.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">__attribute__</span> <span class="p">((</span><span class="n">sentinel</span><span class="p">))</span>
<span class="n">is</span> <span class="n">equivalent</span> <span class="n">to</span>
<span class="n">__attribute__</span> <span class="p">((</span><span class="n">sentinel</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
</pre></div>
</div>
<p>The attribute is automatically set with a position of 0 for the built-in
functions <tt class="docutils literal"><span class="pre">execl</span></tt> and <tt class="docutils literal"><span class="pre">execlp</span></tt>.  The built-in function
<tt class="docutils literal"><span class="pre">execle</span></tt> has the attribute set with a position of 1.</p>
<p>A valid <tt class="docutils literal"><span class="pre">NULL</span></tt> in this context is defined as zero with any pointer
type.  If your system defines the <tt class="docutils literal"><span class="pre">NULL</span></tt> macro with an integer type
then you need to add an explicit cast.  GCC replaces <tt class="docutils literal"><span class="pre">stddef.h</span></tt>
with a copy that redefines NULL appropriately.</p>
<p>The warnings for missing or incorrect sentinels are enabled with
<a class="reference internal" href="options-to-request-or-suppress-warnings.html#cmdoption-Wformat"><em class="xref std std-option">-Wformat</em></a>.</p>
</div></blockquote>
<p>stack_protect</p>
<blockquote>
<div><p id="index-59">This function attribute make a stack protection of the function if
flags fstack-protector or fstack-protector-strong
or fstack-protector-explicit are set.</p>
</div></blockquote>
<p>target (<tt class="docutils literal"><span class="pre">options</span></tt>)</p>
<blockquote>
<div><p id="index-60">Multiple target back ends implement the <tt class="docutils literal"><span class="pre">target</span></tt> attribute
to specify that a function is to
be compiled with different target options than specified on the
command line.  This can be used for instance to have functions
compiled with a different ISA (instruction set architecture) than the
default.  You can also use the #pragma GCC target pragma to set
more than one function to be compiled with specific target options.
See <a class="reference internal" href="pragmas-accepted-by-gcc.html#function-specific-option-pragmas"><em>Function Specific Option Pragmas</em></a>, for details about the
#pragma GCC target pragma.</p>
<p>For instance, on an x86, you could declare one function with the
<tt class="docutils literal"><span class="pre">target(&quot;sse4.1,arch=core2&quot;)</span></tt> attribute and another with
<tt class="docutils literal"><span class="pre">target(&quot;sse4a,arch=amdfam10&quot;)</span></tt>.  This is equivalent to
compiling the first function with <em class="xref std std-option">-msse4.1</em> and
<em class="xref std std-option">-march=core2</em> options, and the second function with
<em class="xref std std-option">-msse4a</em> and <em class="xref std std-option">-march=amdfam10</em> options.  It is up to you
to make sure that a function is only invoked on a machine that
supports the particular ISA it is compiled for (for example by using
<tt class="docutils literal"><span class="pre">cpuid</span></tt> on x86 to determine what feature bits and architecture
family are used).</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">int</span> <span class="nf">core2_func</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">__target__</span> <span class="p">(</span><span class="s">&quot;arch=core2&quot;</span><span class="p">)));</span>
<span class="kt">int</span> <span class="nf">sse3_func</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">__target__</span> <span class="p">(</span><span class="s">&quot;sse3&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>You can either use multiple
strings separated by commas to specify multiple options,
or separate the options with a comma (,) within a single string.</p>
<p>The options supported are specific to each target; refer to x86
Function Attributes, PowerPC Function Attributes, and
Nios II Function Attributes, for details.</p>
</div></blockquote>
<p>unused</p>
<blockquote>
<div><p id="index-61">This attribute, attached to a function, means that the function is meant
to be possibly unused.  GCC does not produce a warning for this
function.</p>
</div></blockquote>
<p>used</p>
<blockquote>
<div><p id="index-62">This attribute, attached to a function, means that code must be emitted
for the function even if it appears that the function is not referenced.
This is useful, for example, when the function is referenced only in
inline assembly.</p>
<p>When applied to a member function of a C++ class template, the
attribute also means that the function is instantiated if the
class itself is instantiated.</p>
</div></blockquote>
<p>visibility (&#8220;<tt class="docutils literal"><span class="pre">visibility_type</span></tt>&#8221;)</p>
<blockquote>
<div><p id="index-63">This attribute affects the linkage of the declaration to which it is attached.
There are four supported <tt class="docutils literal"><span class="pre">visibility_type</span></tt> values: default,
hidden, protected or internal visibility.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">visibility</span> <span class="p">(</span><span class="s">&quot;protected&quot;</span><span class="p">)))</span>
<span class="n">f</span> <span class="p">()</span> <span class="p">{</span> <span class="cm">/* Do something. */</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">int</span> <span class="n">i</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">visibility</span> <span class="p">(</span><span class="s">&quot;hidden&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>The possible values of <tt class="docutils literal"><span class="pre">visibility_type</span></tt> correspond to the
visibility settings in the ELF gABI.</p>
<dl class="docutils">
<dt>default</dt>
<dd><p class="first">Default visibility is the normal case for the object file format.
This value is available for the visibility attribute to override other
options that may change the assumed visibility of entities.</p>
<p>On ELF, default visibility means that the declaration is visible to other
modules and, in shared libraries, means that the declared entity may be
overridden.</p>
<p>On Darwin, default visibility means that the declaration is visible to
other modules.</p>
<p class="last">Default visibility corresponds to &#8216;external linkage&#8217; in the language.</p>
</dd>
<dt>hidden</dt>
<dd>Hidden visibility indicates that the entity declared has a new
form of linkage, which we call &#8216;hidden linkage&#8217;.  Two
declarations of an object with hidden linkage refer to the same object
if they are in the same shared object.</dd>
<dt>internal</dt>
<dd>Internal visibility is like hidden visibility, but with additional
processor specific semantics.  Unless otherwise specified by the
psABI, GCC defines internal visibility to mean that a function is
<em>never</em> called from another module.  Compare this with hidden
functions which, while they cannot be referenced directly by other
modules, can be referenced indirectly via function pointers.  By
indicating that a function cannot be called from outside the module,
GCC may for instance omit the load of a PIC register since it is known
that the calling function loaded the correct value.</dd>
<dt>protected</dt>
<dd><p class="first">Protected visibility is like default visibility except that it
indicates that references within the defining module bind to the
definition in that module.  That is, the declared entity cannot be
overridden by another module.</p>
<p class="last">All visibilities are supported on many, but not all, ELF targets</p>
</dd>
</dl>
<p>(supported when the assembler supports the .visibility
pseudo-op).  Default visibility is supported everywhere.  Hidden
visibility is supported on Darwin targets.</p>
<p>The visibility attribute should be applied only to declarations that
would otherwise have external linkage.  The attribute should be applied
consistently, so that the same entity should not be declared with
different settings of the attribute.</p>
<p>In C++, the visibility attribute applies to types as well as functions
and objects, because in C++ types have linkage.  A class must not have
greater visibility than its non-static data member types and bases,
and class members default to the visibility of their class.  Also, a
declaration without explicit visibility is limited to the visibility
of its type.</p>
<p>In C++, you can mark member functions and static member variables of a
class with the visibility attribute.  This is useful if you know a
particular method or static member variable should only be used from
one shared object; then you can mark it hidden while the rest of the
class has default visibility.  Care must be taken to avoid breaking
the One Definition Rule; for example, it is usually not useful to mark
an inline method as hidden without marking the whole class as hidden.</p>
<p>A C++ namespace declaration can also have the visibility attribute.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">namespace</span> <span class="n">nspace1</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">visibility</span> <span class="p">(</span><span class="s">&quot;protected&quot;</span><span class="p">)))</span>
<span class="p">{</span> <span class="cm">/* Do something. */</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<p>This attribute applies only to the particular namespace body, not to
other definitions of the same namespace; it is equivalent to using
#pragma GCC visibility before and after the namespace
definition (see <a class="reference internal" href="pragmas-accepted-by-gcc.html#visibility-pragmas"><em>Visibility Pragmas</em></a>).</p>
<p>In C++, if a template argument has limited visibility, this
restriction is implicitly propagated to the template instantiation.
Otherwise, template instantiations and specializations default to the
visibility of their template.</p>
<p>If both the template and enclosing class have explicit visibility, the
visibility from the template is used.</p>
</div></blockquote>
<p>warn_unused_result</p>
<blockquote>
<div><p id="index-64">The <tt class="docutils literal"><span class="pre">warn_unused_result</span></tt> attribute causes a warning to be emitted
if a caller of the function with this attribute does not use its
return value.  This is useful for functions where not checking
the result is either a security problem or always a bug, such as
<tt class="docutils literal"><span class="pre">realloc</span></tt>.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">int</span> <span class="nf">fn</span> <span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">warn_unused_result</span><span class="p">));</span>
<span class="kt">int</span> <span class="nf">foo</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">fn</span> <span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="n">fn</span> <span class="p">();</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>results in warning on line 5.</p>
</div></blockquote>
<p>weak</p>
<blockquote>
<div><p id="index-65">The <tt class="docutils literal"><span class="pre">weak</span></tt> attribute causes the declaration to be emitted as a weak
symbol rather than a global.  This is primarily useful in defining
library functions that can be overridden in user code, though it can
also be used with non-function declarations.  Weak symbols are supported
for ELF targets, and also for a.out targets when using the GNU assembler
and linker.</p>
</div></blockquote>
<p>weakref weakref (&#8220;<tt class="docutils literal"><span class="pre">target</span></tt>&#8221;)</p>
<blockquote>
<div><p id="index-66">The <tt class="docutils literal"><span class="pre">weakref</span></tt> attribute marks a declaration as a weak reference.
Without arguments, it should be accompanied by an <tt class="docutils literal"><span class="pre">alias</span></tt> attribute
naming the target symbol.  Optionally, the <tt class="docutils literal"><span class="pre">target</span></tt> may be given as
an argument to <tt class="docutils literal"><span class="pre">weakref</span></tt> itself.  In either case, <tt class="docutils literal"><span class="pre">weakref</span></tt>
implicitly marks the declaration as <tt class="docutils literal"><span class="pre">weak</span></tt>.  Without a
<tt class="docutils literal"><span class="pre">target</span></tt>, given as an argument to <tt class="docutils literal"><span class="pre">weakref</span></tt> or to <tt class="docutils literal"><span class="pre">alias</span></tt>,
<tt class="docutils literal"><span class="pre">weakref</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">weak</span></tt>.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">static</span> <span class="kt">int</span> <span class="nf">x</span><span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">weakref</span> <span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">)));</span>
<span class="cm">/* is equivalent to... */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">x</span><span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">weak</span><span class="p">,</span> <span class="n">weakref</span><span class="p">,</span> <span class="n">alias</span> <span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">)));</span>
<span class="cm">/* and to... */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">x</span><span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">weakref</span><span class="p">));</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">x</span><span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">alias</span> <span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>A weak reference is an alias that does not by itself require a
definition to be given for the target symbol.  If the target symbol is
only referenced through weak references, then it becomes a <tt class="docutils literal"><span class="pre">weak</span></tt>
undefined symbol.  If it is directly referenced, however, then such
strong references prevail, and a definition is required for the
symbol, not necessarily in the same translation unit.</p>
<p>The effect is equivalent to moving all references to the alias to a
separate translation unit, renaming the alias to the aliased symbol,
declaring it as weak, compiling the two separate translation units and
performing a reloadable link on them.</p>
<p>At present, a declaration to which <tt class="docutils literal"><span class="pre">weakref</span></tt> is attached can
only be <tt class="docutils literal"><span class="pre">static</span></tt>.</p>
</div></blockquote>
<p>lower upper either</p>
<blockquote>
<div><span class="target" id="index-67"></span><span class="target" id="index-68"></span><p id="index-69">On the MSP430 target these attributes can be used to specify whether
the function or variable should be placed into low memory, high
memory, or the placement should be left to the linker to decide.  The
attributes are only significant if compiling for the MSP430X
architecture.</p>
<p>The attributes work in conjunction with a linker script that has been
augmented to specify where to place sections with a <tt class="docutils literal"><span class="pre">.lower</span></tt> and
a <tt class="docutils literal"><span class="pre">.upper</span></tt> prefix.  So for example as well as placing the
<tt class="docutils literal"><span class="pre">.data</span></tt> section the script would also specify the placement of a
<tt class="docutils literal"><span class="pre">.lower.data</span></tt> and a <tt class="docutils literal"><span class="pre">.upper.data</span></tt> section.  The intention
being that <tt class="docutils literal"><span class="pre">lower</span></tt> sections are placed into a small but easier to
access memory region and the upper sections are placed into a larger, but
slower to access region.</p>
<p>The <tt class="docutils literal"><span class="pre">either</span></tt> attribute is special.  It tells the linker to place
the object into the corresponding <tt class="docutils literal"><span class="pre">lower</span></tt> section if there is
room for it.  If there is insufficient room then the object is placed
into the corresponding <tt class="docutils literal"><span class="pre">upper</span></tt> section instead.  Note - the
placement algorithm is not very sophisticated.  It will not attempt to
find an optimal packing of the <tt class="docutils literal"><span class="pre">lower</span></tt> sections.  It just makes
one pass over the objects and does the best that it can.  Using the
<a class="reference internal" href="options-that-control-optimization.html#cmdoption-ffunction-sections"><em class="xref std std-option">-ffunction-sections</em></a> and <em class="xref std std-option">-fdata-sections</em> command line
options can help the packing however, since they produce smaller,
easier to pack regions.</p>
</div></blockquote>
</div>
<div class="section" id="arc-function-attributes">
<span id="id2"></span><h2>ARC Function Attributes<a class="headerlink" href="#arc-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the ARC back end:</p>
<p>interrupt</p>
<blockquote>
<div><p id="index-70">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
<p>On the ARC, you must specify the kind of interrupt to be handled
in a parameter to the interrupt attribute like this:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">f</span> <span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span> <span class="p">(</span><span class="s">&quot;ilink1&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>Permissible values for this parameter are: <tt class="docutils literal"><span class="pre">ilink1</span></tt> and
<tt class="docutils literal"><span class="pre">ilink2</span></tt>.</p>
</div></blockquote>
<p>long_call medium_call short_call</p>
<blockquote>
<div><span class="target" id="index-71"></span><span class="target" id="index-72"></span><span class="target" id="index-73"></span><p id="index-74">These attributes specify how a particular function is called.
These attributes override the
<a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mlong-calls"><em class="xref std std-option">-mlong-calls</em></a> and <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mmedium-calls"><em class="xref std std-option">-mmedium-calls</em></a> (see <a class="reference internal" href="hardware-models-and-configurations.html#arc-options"><em>ARC Options</em></a>)
command-line switches and <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">long_calls</span></tt> settings.</p>
<p>For ARC, a function marked with the <tt class="docutils literal"><span class="pre">long_call</span></tt> attribute is
always called using register-indirect jump-and-link instructions,
thereby enabling the called function to be placed anywhere within the
32-bit address space.  A function marked with the <tt class="docutils literal"><span class="pre">medium_call</span></tt>
attribute will always be close enough to be called with an unconditional
branch-and-link instruction, which has a 25-bit offset from
the call site.  A function marked with the <tt class="docutils literal"><span class="pre">short_call</span></tt>
attribute will always be close enough to be called with a conditional
branch-and-link instruction, which has a 21-bit offset from
the call site.</p>
</div></blockquote>
</div>
<div class="section" id="arm-function-attributes">
<span id="id3"></span><h2>ARM Function Attributes<a class="headerlink" href="#arm-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported for ARM targets:</p>
<p>interrupt</p>
<blockquote>
<div><p id="index-75">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
<p>You can specify the kind of interrupt to be handled by
adding an optional parameter to the interrupt attribute like this:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">f</span> <span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span> <span class="p">(</span><span class="s">&quot;IRQ&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>Permissible values for this parameter are: <tt class="docutils literal"><span class="pre">IRQ</span></tt>, <tt class="docutils literal"><span class="pre">FIQ</span></tt>,
<tt class="docutils literal"><span class="pre">SWI</span></tt>, <tt class="docutils literal"><span class="pre">ABORT</span></tt> and <tt class="docutils literal"><span class="pre">UNDEF</span></tt>.</p>
<p>On ARMv7-M the interrupt type is ignored, and the attribute means the function
may be called with a word-aligned stack pointer.</p>
</div></blockquote>
<p>isr</p>
<blockquote>
<div><p id="index-76">Use this attribute on ARM to write Interrupt Service Routines. This is an
alias to the <tt class="docutils literal"><span class="pre">interrupt</span></tt> attribute above.</p>
</div></blockquote>
<p>long_call short_call</p>
<blockquote>
<div><span class="target" id="index-77"></span><span class="target" id="index-78"></span><p id="index-79">These attributes specify how a particular function is called.
These attributes override the
<a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mlong-calls"><em class="xref std std-option">-mlong-calls</em></a> (see <a class="reference internal" href="hardware-models-and-configurations.html#arm-options"><em>ARM Options</em></a>)
command-line switch and <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">long_calls</span></tt> settings.  For ARM, the
<tt class="docutils literal"><span class="pre">long_call</span></tt> attribute indicates that the function might be far
away from the call site and require a different (more expensive)
calling sequence.   The <tt class="docutils literal"><span class="pre">short_call</span></tt> attribute always places
the offset to the function from the call site into the BL
instruction directly.</p>
</div></blockquote>
<p>naked</p>
<blockquote>
<div><p id="index-80">This attribute allows the compiler to construct the
requisite function declaration, while allowing the body of the
function to be assembly code. The specified function will not have
prologue/epilogue sequences generated by the compiler. Only basic
<tt class="docutils literal"><span class="pre">asm</span></tt> statements can safely be included in naked functions
(see <a class="reference internal" href="how-to-use-inline-assembly-language-in-c-code.html#basic-asm"><em>Basic Asm - Assembler Instructions Without Operands</em></a>). While using extended <tt class="docutils literal"><span class="pre">asm</span></tt> or a mixture of
basic <tt class="docutils literal"><span class="pre">asm</span></tt> and C code may appear to work, they cannot be
depended upon to work reliably and are not supported.</p>
</div></blockquote>
<p>pcs</p>
<blockquote>
<div><p id="index-81">The <tt class="docutils literal"><span class="pre">pcs</span></tt> attribute can be used to control the calling convention
used for a function on ARM.  The attribute takes an argument that specifies
the calling convention to use.</p>
<p>When compiling using the AAPCS ABI (or a variant of it) then valid
values for the argument are <tt class="docutils literal"><span class="pre">&quot;aapcs&quot;</span></tt> and <tt class="docutils literal"><span class="pre">&quot;aapcs-vfp&quot;</span></tt>.  In
order to use a variant other than <tt class="docutils literal"><span class="pre">&quot;aapcs&quot;</span></tt> then the compiler must
be permitted to use the appropriate co-processor registers (i.e., the
VFP registers must be available in order to use <tt class="docutils literal"><span class="pre">&quot;aapcs-vfp&quot;</span></tt>).
For example,</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cm">/* Argument passed in r0, and result returned in r0+r1.  */</span>
<span class="kt">double</span> <span class="nf">f2d</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">pcs</span><span class="p">(</span><span class="s">&quot;aapcs&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>Variadic functions always use the <tt class="docutils literal"><span class="pre">&quot;aapcs&quot;</span></tt> calling convention and
the compiler rejects attempts to specify an alternative.</p>
</div></blockquote>
</div>
<div class="section" id="avr-function-attributes">
<span id="id4"></span><h2>AVR Function Attributes<a class="headerlink" href="#avr-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the AVR back end:</p>
<p>interrupt</p>
<blockquote>
<div><p id="index-82">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
<p>On the AVR, the hardware globally disables interrupts when an
interrupt is executed.  The first instruction of an interrupt handler
declared with this attribute is a <tt class="docutils literal"><span class="pre">SEI</span></tt> instruction to
re-enable interrupts.  See also the <tt class="docutils literal"><span class="pre">signal</span></tt> function attribute
that does not insert a <tt class="docutils literal"><span class="pre">SEI</span></tt> instruction.  If both <tt class="docutils literal"><span class="pre">signal</span></tt> and
<tt class="docutils literal"><span class="pre">interrupt</span></tt> are specified for the same function, <tt class="docutils literal"><span class="pre">signal</span></tt>
is silently ignored.</p>
</div></blockquote>
<p>naked</p>
<blockquote>
<div><p id="index-83">This attribute allows the compiler to construct the
requisite function declaration, while allowing the body of the
function to be assembly code. The specified function will not have
prologue/epilogue sequences generated by the compiler. Only basic
<tt class="docutils literal"><span class="pre">asm</span></tt> statements can safely be included in naked functions
(see <a class="reference internal" href="how-to-use-inline-assembly-language-in-c-code.html#basic-asm"><em>Basic Asm - Assembler Instructions Without Operands</em></a>). While using extended <tt class="docutils literal"><span class="pre">asm</span></tt> or a mixture of
basic <tt class="docutils literal"><span class="pre">asm</span></tt> and C code may appear to work, they cannot be
depended upon to work reliably and are not supported.</p>
</div></blockquote>
<p>OS_main OS_task</p>
<blockquote>
<div><span class="target" id="index-84"></span><p id="index-85">On AVR, functions with the <tt class="docutils literal"><span class="pre">OS_main</span></tt> or <tt class="docutils literal"><span class="pre">OS_task</span></tt> attribute
do not save/restore any call-saved register in their prologue/epilogue.</p>
<p>The <tt class="docutils literal"><span class="pre">OS_main</span></tt> attribute can be used when there <em>is
guarantee</em> that interrupts are disabled at the time when the function
is entered.  This saves resources when the stack pointer has to be
changed to set up a frame for local variables.</p>
<p>The <tt class="docutils literal"><span class="pre">OS_task</span></tt> attribute can be used when there is <em>no
guarantee</em> that interrupts are disabled at that time when the function
is entered like for, e.g. task functions in a multi-threading operating
system. In that case, changing the stack pointer register is
guarded by save/clear/restore of the global interrupt enable flag.</p>
<p>The differences to the <tt class="docutils literal"><span class="pre">naked</span></tt> function attribute are:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">naked</span></tt> functions do not have a return instruction whereas
<tt class="docutils literal"><span class="pre">OS_main</span></tt> and <tt class="docutils literal"><span class="pre">OS_task</span></tt> functions have a <tt class="docutils literal"><span class="pre">RET</span></tt> or
<tt class="docutils literal"><span class="pre">RETI</span></tt> return instruction.</li>
<li><tt class="docutils literal"><span class="pre">naked</span></tt> functions do not set up a frame for local variables
or a frame pointer whereas <tt class="docutils literal"><span class="pre">OS_main</span></tt> and <tt class="docutils literal"><span class="pre">OS_task</span></tt> do this
as needed.</li>
</ul>
</div></blockquote>
<p>signal</p>
<blockquote>
<div><p id="index-86">Use this attribute on the AVR to indicate that the specified
function is an interrupt handler.  The compiler generates function
entry and exit sequences suitable for use in an interrupt handler when this
attribute is present.</p>
<p>See also the <tt class="docutils literal"><span class="pre">interrupt</span></tt> function attribute.</p>
<p>The AVR hardware globally disables interrupts when an interrupt is executed.
Interrupt handler functions defined with the <tt class="docutils literal"><span class="pre">signal</span></tt> attribute
do not re-enable interrupts.  It is save to enable interrupts in a
<tt class="docutils literal"><span class="pre">signal</span></tt> handler.  This &#8216;save&#8217; only applies to the code
generated by the compiler and not to the IRQ layout of the
application which is responsibility of the application.</p>
<p>If both <tt class="docutils literal"><span class="pre">signal</span></tt> and <tt class="docutils literal"><span class="pre">interrupt</span></tt> are specified for the same
function, <tt class="docutils literal"><span class="pre">signal</span></tt> is silently ignored.</p>
</div></blockquote>
</div>
<div class="section" id="blackfin-function-attributes">
<span id="id5"></span><h2>Blackfin Function Attributes<a class="headerlink" href="#blackfin-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the Blackfin back end:</p>
<p>exception_handler</p>
<blockquote>
<div><span class="target" id="index-87"></span><p id="index-88">Use this attribute on the Blackfin to indicate that the specified function
is an exception handler.  The compiler generates function entry and
exit sequences suitable for use in an exception handler when this
attribute is present.</p>
</div></blockquote>
<p>interrupt_handler</p>
<blockquote>
<div><p id="index-89">Use this attribute to
indicate that the specified function is an interrupt handler.  The compiler
generates function entry and exit sequences suitable for use in an
interrupt handler when this attribute is present.</p>
</div></blockquote>
<p>kspisusp</p>
<blockquote>
<div><span class="target" id="index-90"></span><p id="index-91">When used together with <tt class="docutils literal"><span class="pre">interrupt_handler</span></tt>, <tt class="docutils literal"><span class="pre">exception_handler</span></tt>
or <tt class="docutils literal"><span class="pre">nmi_handler</span></tt>, code is generated to load the stack pointer
from the USP register in the function prologue.</p>
</div></blockquote>
<p>l1_text</p>
<blockquote>
<div><p id="index-92">This attribute specifies a function to be placed into L1 Instruction
SRAM. The function is put into a specific section named <tt class="docutils literal"><span class="pre">.l1.text</span></tt>.
With <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mfdpic"><em class="xref std std-option">-mfdpic</em></a>, function calls with a such function as the callee
or caller uses inlined PLT.</p>
</div></blockquote>
<p>l2</p>
<blockquote>
<div><p id="index-93">This attribute specifies a function to be placed into L2
SRAM. The function is put into a specific section named
<tt class="docutils literal"><span class="pre">.l2.text</span></tt>. With <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mfdpic"><em class="xref std std-option">-mfdpic</em></a>, callers of such functions use
an inlined PLT.</p>
</div></blockquote>
<p>longcall shortcall</p>
<blockquote>
<div><span class="target" id="index-94"></span><span class="target" id="index-95"></span><p id="index-96">The <tt class="docutils literal"><span class="pre">longcall</span></tt> attribute
indicates that the function might be far away from the call site and
require a different (more expensive) calling sequence.  The
<tt class="docutils literal"><span class="pre">shortcall</span></tt> attribute indicates that the function is always close
enough for the shorter calling sequence to be used.  These attributes
override the <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mlongcall"><em class="xref std std-option">-mlongcall</em></a> switch.</p>
</div></blockquote>
<p>nesting</p>
<blockquote>
<div><span class="target" id="index-97"></span><p id="index-98">Use this attribute together with <tt class="docutils literal"><span class="pre">interrupt_handler</span></tt>,
<tt class="docutils literal"><span class="pre">exception_handler</span></tt> or <tt class="docutils literal"><span class="pre">nmi_handler</span></tt> to indicate that the function
entry code should enable nested interrupts or exceptions.</p>
</div></blockquote>
<p>nmi_handler</p>
<blockquote>
<div><span class="target" id="index-99"></span><p id="index-100">Use this attribute on the Blackfin to indicate that the specified function
is an NMI handler.  The compiler generates function entry and
exit sequences suitable for use in an NMI handler when this
attribute is present.</p>
</div></blockquote>
<p>saveall</p>
<blockquote>
<div><span class="target" id="index-101"></span><p id="index-102">Use this attribute to indicate that
all registers except the stack pointer should be saved in the prologue
regardless of whether they are used or not.</p>
</div></blockquote>
</div>
<div class="section" id="cr16-function-attributes">
<span id="id6"></span><h2>CR16 Function Attributes<a class="headerlink" href="#cr16-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the CR16 back end:</p>
<p>interrupt</p>
<blockquote>
<div><p id="index-103">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
</div></blockquote>
</div>
<div class="section" id="epiphany-function-attributes">
<span id="id7"></span><h2>Epiphany Function Attributes<a class="headerlink" href="#epiphany-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the Epiphany back end:</p>
<p>disinterrupt</p>
<blockquote>
<div><p id="index-104">This attribute causes the compiler to emit
instructions to disable interrupts for the duration of the given
function.</p>
</div></blockquote>
<p>forwarder_section</p>
<blockquote>
<div><p id="index-105">This attribute modifies the behavior of an interrupt handler.
The interrupt handler may be in external memory which cannot be
reached by a branch instruction, so generate a local memory trampoline
to transfer control.  The single parameter identifies the section where
the trampoline is placed.</p>
</div></blockquote>
<p>interrupt</p>
<blockquote>
<div><p id="index-106">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.  It may also generate
a special section with code to initialize the interrupt vector table.</p>
<p>On Epiphany targets one or more optional parameters can be added like this:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span> <span class="p">(</span><span class="s">&quot;dma0, dma1&quot;</span><span class="p">)))</span> <span class="n">universal_dma_handler</span> <span class="p">();</span>
</pre></div>
</div>
<p>Permissible values for these parameters are: <tt class="docutils literal"><span class="pre">reset</span></tt>,
<tt class="docutils literal"><span class="pre">software_exception</span></tt>, <tt class="docutils literal"><span class="pre">page_miss</span></tt>,
<tt class="docutils literal"><span class="pre">timer0</span></tt>, <tt class="docutils literal"><span class="pre">timer1</span></tt>, <tt class="docutils literal"><span class="pre">message</span></tt>,
<tt class="docutils literal"><span class="pre">dma0</span></tt>, <tt class="docutils literal"><span class="pre">dma1</span></tt>, <tt class="docutils literal"><span class="pre">wand</span></tt> and <tt class="docutils literal"><span class="pre">swi</span></tt>.
Multiple parameters indicate that multiple entries in the interrupt
vector table should be initialized for this function, i.e. for each
parameter <tt class="docutils literal"><span class="pre">name</span></tt>, a jump to the function is emitted in
the section ivt_entry_``name``.  The parameter(s) may be omitted
entirely, in which case no interrupt vector table entry is provided.</p>
<p>Note that interrupts are enabled inside the function
unless the <tt class="docutils literal"><span class="pre">disinterrupt</span></tt> attribute is also specified.</p>
<p>The following examples are all valid uses of these attributes on
Epiphany targets:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span><span class="p">))</span> <span class="n">universal_handler</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span> <span class="p">(</span><span class="s">&quot;dma1&quot;</span><span class="p">)))</span> <span class="n">dma1_handler</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span> <span class="p">(</span><span class="s">&quot;dma0, dma1&quot;</span><span class="p">)))</span>
  <span class="n">universal_dma_handler</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span> <span class="p">(</span><span class="s">&quot;timer0&quot;</span><span class="p">),</span> <span class="n">disinterrupt</span><span class="p">))</span>
  <span class="n">fast_timer_handler</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span> <span class="p">(</span><span class="s">&quot;dma0, dma1&quot;</span><span class="p">),</span>
                     <span class="n">forwarder_section</span> <span class="p">(</span><span class="s">&quot;tramp&quot;</span><span class="p">)))</span>
  <span class="n">external_dma_handler</span> <span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
<p>long_call short_call</p>
<blockquote>
<div><span class="target" id="index-107"></span><span class="target" id="index-108"></span><p id="index-109">These attributes specify how a particular function is called.
These attributes override the
<a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mlong-calls"><em class="xref std std-option">-mlong-calls</em></a> (see <a class="reference internal" href="hardware-models-and-configurations.html#adapteva-epiphany-options"><em>Adapteva Epiphany Options</em></a>)
command-line switch and <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">long_calls</span></tt> settings.</p>
</div></blockquote>
</div>
<div class="section" id="h8-300-function-attributes">
<span id="id8"></span><h2>H8/300 Function Attributes<a class="headerlink" href="#h8-300-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are available for H8/300 targets:</p>
<p>function_vector</p>
<blockquote>
<div><p id="index-110">Use this attribute on the H8/300, H8/300H, and H8S to indicate
that the specified function should be called through the function vector.
Calling a function through the function vector reduces code size; however,
the function vector has a limited size (maximum 128 entries on the H8/300
and 64 entries on the H8/300H and H8S)
and shares space with the interrupt vector.</p>
</div></blockquote>
<p>interrupt_handler</p>
<blockquote>
<div><p id="index-111">Use this attribute on the H8/300, H8/300H, and H8S to
indicate that the specified function is an interrupt handler.  The compiler
generates function entry and exit sequences suitable for use in an
interrupt handler when this attribute is present.</p>
</div></blockquote>
<p>saveall</p>
<blockquote>
<div><span class="target" id="index-112"></span><p id="index-113">Use this attribute on the H8/300, H8/300H, and H8S to indicate that
all registers except the stack pointer should be saved in the prologue
regardless of whether they are used or not.</p>
</div></blockquote>
</div>
<div class="section" id="ia-64-function-attributes">
<span id="id9"></span><h2>IA-64 Function Attributes<a class="headerlink" href="#ia-64-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported on IA-64 targets:</p>
<p>syscall_linkage</p>
<blockquote>
<div><p id="index-114">This attribute is used to modify the IA-64 calling convention by marking
all input registers as live at all function exits.  This makes it possible
to restart a system call after an interrupt without having to save/restore
the input registers.  This also prevents kernel data from leaking into
application code.</p>
</div></blockquote>
<p>version_id</p>
<blockquote>
<div><p id="index-115">This IA-64 HP-UX attribute, attached to a global variable or function, renames a
symbol to contain a version string, thus allowing for function level
versioning.  HP-UX system header files may use function level versioning
for some system calls.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">int</span> <span class="nf">foo</span> <span class="p">()</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">version_id</span> <span class="p">(</span><span class="s">&quot;20040821&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>Calls to <tt class="docutils literal"><span class="pre">foo</span></tt> are mapped to calls to <tt class="docutils literal"><span class="pre">foo{20040821}</span></tt>.</p>
</div></blockquote>
</div>
<div class="section" id="m32c-function-attributes">
<span id="id10"></span><h2>M32C Function Attributes<a class="headerlink" href="#m32c-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the M32C back end:</p>
<p>bank_switch</p>
<blockquote>
<div><p id="index-116">When added to an interrupt handler with the M32C port, causes the
prologue and epilogue to use bank switching to preserve the registers
rather than saving them on the stack.</p>
</div></blockquote>
<p>fast_interrupt</p>
<blockquote>
<div><p id="index-117">Use this attribute on the M32C port to indicate that the specified
function is a fast interrupt handler.  This is just like the
<tt class="docutils literal"><span class="pre">interrupt</span></tt> attribute, except that <tt class="docutils literal"><span class="pre">freit</span></tt> is used to return
instead of <tt class="docutils literal"><span class="pre">reit</span></tt>.</p>
</div></blockquote>
<p>function_vector</p>
<blockquote>
<div><p id="index-118">On M16C/M32C targets, the <tt class="docutils literal"><span class="pre">function_vector</span></tt> attribute declares a
special page subroutine call function. Use of this attribute reduces
the code size by 2 bytes for each call generated to the
subroutine. The argument to the attribute is the vector number entry
from the special page vector table which contains the 16 low-order
bits of the subroutine&#8217;s entry address. Each vector table has special
page number (18 to 255) that is used in <tt class="docutils literal"><span class="pre">jsrs</span></tt> instructions.
Jump addresses of the routines are generated by adding 0x0F0000 (in
case of M16C targets) or 0xFF0000 (in case of M32C targets), to the
2-byte addresses set in the vector table. Therefore you need to ensure
that all the special page vector routines should get mapped within the
address range 0x0F0000 to 0x0FFFFF (for M16C) and 0xFF0000 to 0xFFFFFF
(for M32C).</p>
<p>In the following example 2 bytes are saved for each call to
function <tt class="docutils literal"><span class="pre">foo</span></tt>.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">foo</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">function_vector</span><span class="p">(</span><span class="mh">0x18</span><span class="p">)));</span>
<span class="kt">void</span> <span class="nf">foo</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">bar</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">foo</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If functions are defined in one file and are called in another file,
then be sure to write this declaration in both files.</p>
<p>This attribute is ignored for R8C target.</p>
</div></blockquote>
<p>interrupt</p>
<blockquote>
<div><p id="index-119">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
</div></blockquote>
</div>
<div class="section" id="m32r-d-function-attributes">
<span id="id11"></span><h2>M32R/D Function Attributes<a class="headerlink" href="#m32r-d-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the M32R/D back end:</p>
<p>interrupt</p>
<blockquote>
<div><p id="index-120">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
</div></blockquote>
<p>model (<tt class="docutils literal"><span class="pre">model-name</span></tt>)</p>
<blockquote>
<div><span class="target" id="index-121"></span><p id="index-122">On the M32R/D, use this attribute to set the addressability of an
object, and of the code generated for a function.  The identifier
<tt class="docutils literal"><span class="pre">model-name</span></tt> is one of <tt class="docutils literal"><span class="pre">small</span></tt>, <tt class="docutils literal"><span class="pre">medium</span></tt>, or
<tt class="docutils literal"><span class="pre">large</span></tt>, representing each of the code models.</p>
<p>Small model objects live in the lower 16MB of memory (so that their
addresses can be loaded with the <tt class="docutils literal"><span class="pre">ld24</span></tt> instruction), and are
callable with the <tt class="docutils literal"><span class="pre">bl</span></tt> instruction.</p>
<p>Medium model objects may live anywhere in the 32-bit address space (the
compiler generates <tt class="docutils literal"><span class="pre">seth/add3</span></tt> instructions to load their addresses),
and are callable with the <tt class="docutils literal"><span class="pre">bl</span></tt> instruction.</p>
<p>Large model objects may live anywhere in the 32-bit address space (the
compiler generates <tt class="docutils literal"><span class="pre">seth/add3</span></tt> instructions to load their addresses),
and may not be reachable with the <tt class="docutils literal"><span class="pre">bl</span></tt> instruction (the compiler
generates the much slower <tt class="docutils literal"><span class="pre">seth/add3/jl</span></tt> instruction sequence).</p>
</div></blockquote>
</div>
<div class="section" id="m68k-function-attributes">
<span id="id12"></span><h2>m68k Function Attributes<a class="headerlink" href="#m68k-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the m68k back end:</p>
<p>interrupt interrupt_handler</p>
<blockquote>
<div><span class="target" id="index-123"></span><p id="index-124">Use this attribute to
indicate that the specified function is an interrupt handler.  The compiler
generates function entry and exit sequences suitable for use in an
interrupt handler when this attribute is present.  Either name may be used.</p>
</div></blockquote>
<p>interrupt_thread</p>
<blockquote>
<div><p id="index-125">Use this attribute on fido, a subarchitecture of the m68k, to indicate
that the specified function is an interrupt handler that is designed
to run as a thread.  The compiler omits generate prologue/epilogue
sequences and replaces the return instruction with a <tt class="docutils literal"><span class="pre">sleep</span></tt>
instruction.  This attribute is available only on fido.</p>
</div></blockquote>
</div>
<div class="section" id="mcore-function-attributes">
<span id="id13"></span><h2>MCORE Function Attributes<a class="headerlink" href="#mcore-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the MCORE back end:</p>
<p>naked</p>
<blockquote>
<div><p id="index-126">This attribute allows the compiler to construct the
requisite function declaration, while allowing the body of the
function to be assembly code. The specified function will not have
prologue/epilogue sequences generated by the compiler. Only basic
<tt class="docutils literal"><span class="pre">asm</span></tt> statements can safely be included in naked functions
(see <a class="reference internal" href="how-to-use-inline-assembly-language-in-c-code.html#basic-asm"><em>Basic Asm - Assembler Instructions Without Operands</em></a>). While using extended <tt class="docutils literal"><span class="pre">asm</span></tt> or a mixture of
basic <tt class="docutils literal"><span class="pre">asm</span></tt> and C code may appear to work, they cannot be
depended upon to work reliably and are not supported.</p>
</div></blockquote>
</div>
<div class="section" id="mep-function-attributes">
<span id="id14"></span><h2>MeP Function Attributes<a class="headerlink" href="#mep-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the MeP back end:</p>
<p>disinterrupt</p>
<blockquote>
<div><p id="index-127">On MeP targets, this attribute causes the compiler to emit
instructions to disable interrupts for the duration of the given
function.</p>
</div></blockquote>
<p>interrupt</p>
<blockquote>
<div><p id="index-128">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
</div></blockquote>
<p>near</p>
<blockquote>
<div><p id="index-129">This attribute causes the compiler to assume the called
function is close enough to use the normal calling convention,
overriding the <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mtf"><em class="xref std std-option">-mtf</em></a> command-line option.</p>
</div></blockquote>
<p>far</p>
<blockquote>
<div><p id="index-130">On MeP targets this causes the compiler to use a calling convention
that assumes the called function is too far away for the built-in
addressing modes.</p>
</div></blockquote>
<p>vliw</p>
<blockquote>
<div><p id="index-131">The <tt class="docutils literal"><span class="pre">vliw</span></tt> attribute tells the compiler to emit
instructions in VLIW mode instead of core mode.  Note that this
attribute is not allowed unless a VLIW coprocessor has been configured
and enabled through command-line options.</p>
</div></blockquote>
</div>
<div class="section" id="microblaze-function-attributes">
<span id="id15"></span><h2>MicroBlaze Function Attributes<a class="headerlink" href="#microblaze-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported on MicroBlaze targets:</p>
<p>save_volatiles</p>
<blockquote>
<div><p id="index-132">Use this attribute to indicate that the function is
an interrupt handler.  All volatile registers (in addition to non-volatile
registers) are saved in the function prologue.  If the function is a leaf
function, only volatiles used by the function are saved.  A normal function
return is generated instead of a return from interrupt.</p>
</div></blockquote>
<p>break_handler</p>
<blockquote>
<div><span class="target" id="index-133"></span><p id="index-134">Use this attribute to indicate that
the specified function is a break handler.  The compiler generates function
entry and exit sequences suitable for use in an break handler when this
attribute is present. The return from <tt class="docutils literal"><span class="pre">break_handler</span></tt> is done through
the <tt class="docutils literal"><span class="pre">rtbd</span></tt> instead of <tt class="docutils literal"><span class="pre">rtsd</span></tt>.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">f</span> <span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">break_handler</span><span class="p">));</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="microsoft-windows-function-attributes">
<span id="id16"></span><h2>Microsoft Windows Function Attributes<a class="headerlink" href="#microsoft-windows-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>The following attributes are available on Microsoft Windows and Symbian OS
targets.</p>
<p>dllexport</p>
<blockquote>
<div><span class="target" id="index-135"></span><p id="index-136">On Microsoft Windows targets and Symbian OS targets the
<tt class="docutils literal"><span class="pre">dllexport</span></tt> attribute causes the compiler to provide a global
pointer to a pointer in a DLL, so that it can be referenced with the
<tt class="docutils literal"><span class="pre">dllimport</span></tt> attribute.  On Microsoft Windows targets, the pointer
name is formed by combining <tt class="docutils literal"><span class="pre">_imp__</span></tt> and the function or variable
name.</p>
<p>You can use <tt class="docutils literal"><span class="pre">__declspec(dllexport)</span></tt> as a synonym for
<tt class="docutils literal"><span class="pre">__attribute__</span> <span class="pre">((dllexport))</span></tt> for compatibility with other
compilers.</p>
<p>On systems that support the <tt class="docutils literal"><span class="pre">visibility</span></tt> attribute, this
attribute also implies &#8216;default&#8217; visibility.  It is an error to
explicitly specify any other visibility.</p>
<p>GCC&#8217;s default behavior is to emit all inline functions with the
<tt class="docutils literal"><span class="pre">dllexport</span></tt> attribute.  Since this can cause object file-size bloat,
you can use <a class="reference internal" href="options-that-control-optimization.html#cmdoption-fno-keep-inline-dllexport"><em class="xref std std-option">-fno-keep-inline-dllexport</em></a>, which tells GCC to
ignore the attribute for inlined functions unless the
<a class="reference internal" href="options-that-control-optimization.html#cmdoption-fkeep-inline-functions"><em class="xref std std-option">-fkeep-inline-functions</em></a> flag is used instead.</p>
<p>The attribute is ignored for undefined symbols.</p>
<p>When applied to C++ classes, the attribute marks defined non-inlined
member functions and static data members as exports.  Static consts
initialized in-class are not marked unless they are also defined
out-of-class.</p>
<p>For Microsoft Windows targets there are alternative methods for
including the symbol in the DLL&#8217;s export table such as using a
.def file with an <tt class="docutils literal"><span class="pre">EXPORTS</span></tt> section or, with GNU ld, using
the <em class="xref std std-option">--export-all</em> linker flag.</p>
</div></blockquote>
<p>dllimport</p>
<blockquote>
<div><span class="target" id="index-137"></span><p id="index-138">On Microsoft Windows and Symbian OS targets, the <tt class="docutils literal"><span class="pre">dllimport</span></tt>
attribute causes the compiler to reference a function or variable via
a global pointer to a pointer that is set up by the DLL exporting the
symbol.  The attribute implies <tt class="docutils literal"><span class="pre">extern</span></tt>.  On Microsoft Windows
targets, the pointer name is formed by combining <tt class="docutils literal"><span class="pre">_imp__</span></tt> and the
function or variable name.</p>
<p>You can use <tt class="docutils literal"><span class="pre">__declspec(dllimport)</span></tt> as a synonym for
<tt class="docutils literal"><span class="pre">__attribute__</span> <span class="pre">((dllimport))</span></tt> for compatibility with other
compilers.</p>
<p>On systems that support the <tt class="docutils literal"><span class="pre">visibility</span></tt> attribute, this
attribute also implies &#8216;default&#8217; visibility.  It is an error to
explicitly specify any other visibility.</p>
<p>Currently, the attribute is ignored for inlined functions.  If the
attribute is applied to a symbol <em>definition</em>, an error is reported.
If a symbol previously declared <tt class="docutils literal"><span class="pre">dllimport</span></tt> is later defined, the
attribute is ignored in subsequent references, and a warning is emitted.
The attribute is also overridden by a subsequent declaration as
<tt class="docutils literal"><span class="pre">dllexport</span></tt>.</p>
<p>When applied to C++ classes, the attribute marks non-inlined
member functions and static data members as imports.  However, the
attribute is ignored for virtual methods to allow creation of vtables
using thunks.</p>
<p>On the SH Symbian OS target the <tt class="docutils literal"><span class="pre">dllimport</span></tt> attribute also has
another affect-it can cause the vtable and run-time type information
for a class to be exported.  This happens when the class has a
dllimported constructor or a non-inline, non-pure virtual function
and, for either of those two conditions, the class also has an inline
constructor or destructor and has a key function that is defined in
the current translation unit.</p>
<p>For Microsoft Windows targets the use of the <tt class="docutils literal"><span class="pre">dllimport</span></tt>
attribute on functions is not necessary, but provides a small
performance benefit by eliminating a thunk in the DLL.  The use of the
<tt class="docutils literal"><span class="pre">dllimport</span></tt> attribute on imported variables can be avoided by passing the
<em class="xref std std-option">--enable-auto-import</em> switch to the GNU linker.  As with
functions, using the attribute for a variable eliminates a thunk in
the DLL.</p>
<p>One drawback to using this attribute is that a pointer to a
<em>variable</em> marked as <tt class="docutils literal"><span class="pre">dllimport</span></tt> cannot be used as a constant
address. However, a pointer to a <em>function</em> with the
<tt class="docutils literal"><span class="pre">dllimport</span></tt> attribute can be used as a constant initializer; in
this case, the address of a stub function in the import lib is
referenced.  On Microsoft Windows targets, the attribute can be disabled
for functions by setting the <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mnop-fun-dllimport"><em class="xref std std-option">-mnop-fun-dllimport</em></a> flag.</p>
</div></blockquote>
</div>
<div class="section" id="mips-function-attributes">
<span id="id17"></span><h2>MIPS Function Attributes<a class="headerlink" href="#mips-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the MIPS back end:</p>
<p>interrupt</p>
<blockquote>
<div><p id="index-139">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
<p>You can use the following attributes to modify the behavior
of an interrupt handler:</p>
<p>use_shadow_register_set</p>
<blockquote>
<div><p id="index-140">Assume that the handler uses a shadow register set, instead of
the main general-purpose registers.</p>
</div></blockquote>
<p>keep_interrupts_masked</p>
<blockquote>
<div><p id="index-141">Keep interrupts masked for the whole function.  Without this attribute,
GCC tries to reenable interrupts for as much of the function as it can.</p>
</div></blockquote>
<p>use_debug_exception_return</p>
<blockquote>
<div><p id="index-142">Return using the <tt class="docutils literal"><span class="pre">deret</span></tt> instruction.  Interrupt handlers that don&#8217;t
have this attribute return using <tt class="docutils literal"><span class="pre">eret</span></tt> instead.</p>
<p>You can use any combination of these attributes, as shown below:</p>
</div></blockquote>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span><span class="p">))</span> <span class="n">v0</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span><span class="p">,</span> <span class="n">use_shadow_register_set</span><span class="p">))</span> <span class="n">v1</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span><span class="p">,</span> <span class="n">keep_interrupts_masked</span><span class="p">))</span> <span class="n">v2</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span><span class="p">,</span> <span class="n">use_debug_exception_return</span><span class="p">))</span> <span class="n">v3</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span><span class="p">,</span> <span class="n">use_shadow_register_set</span><span class="p">,</span>
                     <span class="n">keep_interrupts_masked</span><span class="p">))</span> <span class="n">v4</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span><span class="p">,</span> <span class="n">use_shadow_register_set</span><span class="p">,</span>
                     <span class="n">use_debug_exception_return</span><span class="p">))</span> <span class="n">v5</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span><span class="p">,</span> <span class="n">keep_interrupts_masked</span><span class="p">,</span>
                     <span class="n">use_debug_exception_return</span><span class="p">))</span> <span class="n">v6</span> <span class="p">();</span>
<span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span><span class="p">,</span> <span class="n">use_shadow_register_set</span><span class="p">,</span>
                     <span class="n">keep_interrupts_masked</span><span class="p">,</span>
                     <span class="n">use_debug_exception_return</span><span class="p">))</span> <span class="n">v7</span> <span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
<p>long_call near far</p>
<blockquote>
<div><span class="target" id="index-143"></span><span class="target" id="index-144"></span><span class="target" id="index-145"></span><p id="index-146">These attributes specify how a particular function is called on MIPS.
The attributes override the <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mlong-calls"><em class="xref std std-option">-mlong-calls</em></a> (see <a class="reference internal" href="hardware-models-and-configurations.html#mips-options"><em>MIPS Options</em></a>)
command-line switch.  The <tt class="docutils literal"><span class="pre">long_call</span></tt> and <tt class="docutils literal"><span class="pre">far</span></tt> attributes are
synonyms, and cause the compiler to always call
the function by first loading its address into a register, and then using
the contents of that register.  The <tt class="docutils literal"><span class="pre">near</span></tt> attribute has the opposite
effect; it specifies that non-PIC calls should be made using the more
efficient <tt class="docutils literal"><span class="pre">jal</span></tt> instruction.</p>
</div></blockquote>
<p>mips16 nomips16</p>
<blockquote>
<div><span class="target" id="index-147"></span><p id="index-148">On MIPS targets, you can use the <tt class="docutils literal"><span class="pre">mips16</span></tt> and <tt class="docutils literal"><span class="pre">nomips16</span></tt>
function attributes to locally select or turn off MIPS16 code generation.
A function with the <tt class="docutils literal"><span class="pre">mips16</span></tt> attribute is emitted as MIPS16 code,
while MIPS16 code generation is disabled for functions with the
<tt class="docutils literal"><span class="pre">nomips16</span></tt> attribute.  These attributes override the
<a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mips16"><em class="xref std std-option">-mips16</em></a> and <em class="xref std std-option">-mno-mips16</em> options on the command line
(see <a class="reference internal" href="hardware-models-and-configurations.html#mips-options"><em>MIPS Options</em></a>).</p>
<p>When compiling files containing mixed MIPS16 and non-MIPS16 code, the
preprocessor symbol <tt class="docutils literal"><span class="pre">__mips16</span></tt> reflects the setting on the command line,
not that within individual functions.  Mixed MIPS16 and non-MIPS16 code
may interact badly with some GCC extensions such as <tt class="docutils literal"><span class="pre">__builtin_apply</span></tt>
(see <a class="reference internal" href="constructing-function-calls.html#constructing-calls"><em>Constructing Function Calls</em></a>).</p>
</div></blockquote>
<p>micromips, MIPS nomicromips, MIPS</p>
<blockquote>
<div><span class="target" id="index-149"></span><p id="index-150">On MIPS targets, you can use the <tt class="docutils literal"><span class="pre">micromips</span></tt> and <tt class="docutils literal"><span class="pre">nomicromips</span></tt>
function attributes to locally select or turn off microMIPS code generation.
A function with the <tt class="docutils literal"><span class="pre">micromips</span></tt> attribute is emitted as microMIPS code,
while microMIPS code generation is disabled for functions with the
<tt class="docutils literal"><span class="pre">nomicromips</span></tt> attribute.  These attributes override the
<a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mmicromips"><em class="xref std std-option">-mmicromips</em></a> and <em class="xref std std-option">-mno-micromips</em> options on the command line
(see <a class="reference internal" href="hardware-models-and-configurations.html#mips-options"><em>MIPS Options</em></a>).</p>
<p>When compiling files containing mixed microMIPS and non-microMIPS code, the
preprocessor symbol <tt class="docutils literal"><span class="pre">__mips_micromips</span></tt> reflects the setting on the
command line,
not that within individual functions.  Mixed microMIPS and non-microMIPS code
may interact badly with some GCC extensions such as <tt class="docutils literal"><span class="pre">__builtin_apply</span></tt>
(see <a class="reference internal" href="constructing-function-calls.html#constructing-calls"><em>Constructing Function Calls</em></a>).</p>
</div></blockquote>
<p>nocompression</p>
<blockquote>
<div><p id="index-151">On MIPS targets, you can use the <tt class="docutils literal"><span class="pre">nocompression</span></tt> function attribute
to locally turn off MIPS16 and microMIPS code generation.  This attribute
overrides the <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mips16"><em class="xref std std-option">-mips16</em></a> and <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mmicromips"><em class="xref std std-option">-mmicromips</em></a> options on the
command line (see <a class="reference internal" href="hardware-models-and-configurations.html#mips-options"><em>MIPS Options</em></a>).</p>
</div></blockquote>
</div>
<div class="section" id="msp430-function-attributes">
<span id="id18"></span><h2>MSP430 Function Attributes<a class="headerlink" href="#msp430-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the MSP430 back end:</p>
<p>critical</p>
<blockquote>
<div><p id="index-152">Critical functions disable interrupts upon entry and restore the
previous interrupt state upon exit.  Critical functions cannot also
have the <tt class="docutils literal"><span class="pre">naked</span></tt> or <tt class="docutils literal"><span class="pre">reentrant</span></tt> attributes.  They can have
the <tt class="docutils literal"><span class="pre">interrupt</span></tt> attribute.</p>
</div></blockquote>
<p>interrupt</p>
<blockquote>
<div><p id="index-153">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
<p>You can provide an argument to the interrupt
attribute which specifies a name or number.  If the argument is a
number it indicates the slot in the interrupt vector table (0 - 31) to
which this handler should be assigned.  If the argument is a name it
is treated as a symbolic name for the vector slot.  These names should
match up with appropriate entries in the linker script.  By default
the names <tt class="docutils literal"><span class="pre">watchdog</span></tt> for vector 26, <tt class="docutils literal"><span class="pre">nmi</span></tt> for vector 30 and
<tt class="docutils literal"><span class="pre">reset</span></tt> for vector 31 are recognized.</p>
</div></blockquote>
<p>naked</p>
<blockquote>
<div><p id="index-154">This attribute allows the compiler to construct the
requisite function declaration, while allowing the body of the
function to be assembly code. The specified function will not have
prologue/epilogue sequences generated by the compiler. Only basic
<tt class="docutils literal"><span class="pre">asm</span></tt> statements can safely be included in naked functions
(see <a class="reference internal" href="how-to-use-inline-assembly-language-in-c-code.html#basic-asm"><em>Basic Asm - Assembler Instructions Without Operands</em></a>). While using extended <tt class="docutils literal"><span class="pre">asm</span></tt> or a mixture of
basic <tt class="docutils literal"><span class="pre">asm</span></tt> and C code may appear to work, they cannot be
depended upon to work reliably and are not supported.</p>
</div></blockquote>
<p>reentrant</p>
<blockquote>
<div><p id="index-155">Reentrant functions disable interrupts upon entry and enable them
upon exit.  Reentrant functions cannot also have the <tt class="docutils literal"><span class="pre">naked</span></tt>
or <tt class="docutils literal"><span class="pre">critical</span></tt> attributes.  They can have the <tt class="docutils literal"><span class="pre">interrupt</span></tt>
attribute.</p>
</div></blockquote>
<p>wakeup</p>
<blockquote>
<div><p id="index-156">This attribute only applies to interrupt functions.  It is silently
ignored if applied to a non-interrupt function.  A wakeup interrupt
function will rouse the processor from any low-power state that it
might be in when the function exits.</p>
</div></blockquote>
</div>
<div class="section" id="nds32-function-attributes">
<span id="id19"></span><h2>NDS32 Function Attributes<a class="headerlink" href="#nds32-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the NDS32 back end:</p>
<p>exception</p>
<blockquote>
<div><span class="target" id="index-157"></span><p id="index-158">Use this attribute on the NDS32 target to indicate that the specified function
is an exception handler.  The compiler will generate corresponding sections
for use in an exception handler.</p>
</div></blockquote>
<p>interrupt</p>
<blockquote>
<div><p id="index-159">On NDS32 target, this attribute indicates that the specified function
is an interrupt handler.  The compiler generates corresponding sections
for use in an interrupt handler.  You can use the following attributes
to modify the behavior:</p>
<p>nested</p>
<blockquote>
<div><p id="index-160">This interrupt service routine is interruptible.</p>
</div></blockquote>
<p>not_nested</p>
<blockquote>
<div><p id="index-161">This interrupt service routine is not interruptible.</p>
</div></blockquote>
<p>nested_ready</p>
<blockquote>
<div><p id="index-162">This interrupt service routine is interruptible after <tt class="docutils literal"><span class="pre">PSW.GIE</span></tt>
(global interrupt enable) is set.  This allows interrupt service routine to
finish some short critical code before enabling interrupts.</p>
</div></blockquote>
<p>save_all</p>
<blockquote>
<div><p id="index-163">The system will help save all registers into stack before entering
interrupt handler.</p>
</div></blockquote>
<p>partial_save</p>
<blockquote>
<div><p id="index-164">The system will help save caller registers into stack before entering
interrupt handler.</p>
</div></blockquote>
</div></blockquote>
<p>naked</p>
<blockquote>
<div><p id="index-165">This attribute allows the compiler to construct the
requisite function declaration, while allowing the body of the
function to be assembly code. The specified function will not have
prologue/epilogue sequences generated by the compiler. Only basic
<tt class="docutils literal"><span class="pre">asm</span></tt> statements can safely be included in naked functions
(see <a class="reference internal" href="how-to-use-inline-assembly-language-in-c-code.html#basic-asm"><em>Basic Asm - Assembler Instructions Without Operands</em></a>). While using extended <tt class="docutils literal"><span class="pre">asm</span></tt> or a mixture of
basic <tt class="docutils literal"><span class="pre">asm</span></tt> and C code may appear to work, they cannot be
depended upon to work reliably and are not supported.</p>
</div></blockquote>
<p>reset</p>
<blockquote>
<div><span class="target" id="index-166"></span><p id="index-167">Use this attribute on the NDS32 target to indicate that the specified function
is a reset handler.  The compiler will generate corresponding sections
for use in a reset handler.  You can use the following attributes
to provide extra exception handling:</p>
<p>nmi</p>
<blockquote>
<div><p id="index-168">Provide a user-defined function to handle NMI exception.</p>
</div></blockquote>
<p>warm</p>
<blockquote>
<div><p id="index-169">Provide a user-defined function to handle warm reset exception.</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="nios-ii-function-attributes">
<span id="id20"></span><h2>Nios II Function Attributes<a class="headerlink" href="#nios-ii-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the Nios II back end:</p>
<p>target (<tt class="docutils literal"><span class="pre">options</span></tt>)</p>
<blockquote>
<div><p id="index-170">As discussed in Common Function Attributes, this attribute
allows specification of target-specific compilation options.</p>
<p>When compiling for Nios II, the following options are allowed:</p>
<p>custom-<tt class="docutils literal"><span class="pre">insn``=``N</span></tt> no-custom-<tt class="docutils literal"><span class="pre">insn</span></tt></p>
<blockquote>
<div><span class="target" id="index-171"></span><p id="index-172">Each custom-<tt class="docutils literal"><span class="pre">insn``=``N</span></tt> attribute locally enables use of a
custom instruction with encoding <tt class="docutils literal"><span class="pre">N</span></tt> when generating code that uses
<tt class="docutils literal"><span class="pre">insn</span></tt>.  Similarly, no-custom-<tt class="docutils literal"><span class="pre">insn</span></tt> locally inhibits use of
the custom instruction <tt class="docutils literal"><span class="pre">insn</span></tt>.
These target attributes correspond to the
<em class="xref std std-option">-mcustom-``insn``=``N``</em> and <em class="xref std std-option">-mno-custom-``insn``</em>
command-line options, and support the same set of <tt class="docutils literal"><span class="pre">insn</span></tt> keywords.
See <a class="reference internal" href="hardware-models-and-configurations.html#nios-ii-options"><em>Nios II Options</em></a>, for more information.</p>
</div></blockquote>
<p>custom-fpu-cfg=``name``</p>
<blockquote>
<div><p id="index-173">This attribute corresponds to the <em class="xref std std-option">-mcustom-fpu-cfg=``name``</em>
command-line option, to select a predefined set of custom instructions
named <tt class="docutils literal"><span class="pre">name</span></tt>.
See <a class="reference internal" href="hardware-models-and-configurations.html#nios-ii-options"><em>Nios II Options</em></a>, for more information.</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="powerpc-function-attributes">
<span id="id21"></span><h2>PowerPC Function Attributes<a class="headerlink" href="#powerpc-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the PowerPC back end:</p>
<p>longcall shortcall</p>
<blockquote>
<div><span class="target" id="index-174"></span><span class="target" id="index-175"></span><p id="index-176">The <tt class="docutils literal"><span class="pre">longcall</span></tt> attribute
indicates that the function might be far away from the call site and
require a different (more expensive) calling sequence.  The
<tt class="docutils literal"><span class="pre">shortcall</span></tt> attribute indicates that the function is always close
enough for the shorter calling sequence to be used.  These attributes
override both the <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mlongcall"><em class="xref std std-option">-mlongcall</em></a> switch and
the <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">longcall</span></tt> setting.</p>
<p>See <a class="reference internal" href="hardware-models-and-configurations.html#rs-6000-and-powerpc-options"><em>IBM RS/6000 and PowerPC Options</em></a>, for more information on whether long
calls are necessary.</p>
</div></blockquote>
<p>target (<tt class="docutils literal"><span class="pre">options</span></tt>)</p>
<blockquote>
<div><p id="index-177">As discussed in Common Function Attributes, this attribute
allows specification of target-specific compilation options.</p>
<p>On the PowerPC, the following options are allowed:</p>
<p>altivec no-altivec</p>
<blockquote>
<div><p id="index-178">Generate code that uses (does not use) AltiVec instructions.  In
32-bit code, you cannot enable AltiVec instructions unless
<em class="xref std std-option">-mabi=altivec</em> is used on the command line.</p>
</div></blockquote>
<p>cmpb no-cmpb</p>
<blockquote>
<div><p id="index-179">Generate code that uses (does not use) the compare bytes instruction
implemented on the POWER6 processor and other processors that support
the PowerPC V2.05 architecture.</p>
</div></blockquote>
<p>dlmzb no-dlmzb</p>
<blockquote>
<div><p id="index-180">Generate code that uses (does not use) the string-search dlmzb
instruction on the IBM 405, 440, 464 and 476 processors.  This instruction is
generated by default when targeting those processors.</p>
</div></blockquote>
<p>fprnd no-fprnd</p>
<blockquote>
<div><p id="index-181">Generate code that uses (does not use) the FP round to integer
instructions implemented on the POWER5+ processor and other processors
that support the PowerPC V2.03 architecture.</p>
</div></blockquote>
<p>hard-dfp no-hard-dfp</p>
<blockquote>
<div><p id="index-182">Generate code that uses (does not use) the decimal floating-point
instructions implemented on some POWER processors.</p>
</div></blockquote>
<p>isel no-isel</p>
<blockquote>
<div><p id="index-183">Generate code that uses (does not use) ISEL instruction.</p>
</div></blockquote>
<p>mfcrf no-mfcrf</p>
<blockquote>
<div><p id="index-184">Generate code that uses (does not use) the move from condition
register field instruction implemented on the POWER4 processor and
other processors that support the PowerPC V2.01 architecture.</p>
</div></blockquote>
<p>mfpgpr no-mfpgpr</p>
<blockquote>
<div><p id="index-185">Generate code that uses (does not use) the FP move to/from general
purpose register instructions implemented on the POWER6X processor and
other processors that support the extended PowerPC V2.05 architecture.</p>
</div></blockquote>
<p>mulhw no-mulhw</p>
<blockquote>
<div><p id="index-186">Generate code that uses (does not use) the half-word multiply and
multiply-accumulate instructions on the IBM 405, 440, 464 and 476 processors.
These instructions are generated by default when targeting those
processors.</p>
</div></blockquote>
<p>multiple no-multiple</p>
<blockquote>
<div><p id="index-187">Generate code that uses (does not use) the load multiple word
instructions and the store multiple word instructions.</p>
</div></blockquote>
<p>update no-update</p>
<blockquote>
<div><p id="index-188">Generate code that uses (does not use) the load or store instructions
that update the base register to the address of the calculated memory
location.</p>
</div></blockquote>
<p>popcntb no-popcntb</p>
<blockquote>
<div><p id="index-189">Generate code that uses (does not use) the popcount and double-precision
FP reciprocal estimate instruction implemented on the POWER5
processor and other processors that support the PowerPC V2.02
architecture.</p>
</div></blockquote>
<p>popcntd no-popcntd</p>
<blockquote>
<div><p id="index-190">Generate code that uses (does not use) the popcount instruction
implemented on the POWER7 processor and other processors that support
the PowerPC V2.06 architecture.</p>
</div></blockquote>
<p>powerpc-gfxopt no-powerpc-gfxopt</p>
<blockquote>
<div><p id="index-191">Generate code that uses (does not use) the optional PowerPC
architecture instructions in the Graphics group, including
floating-point select.</p>
</div></blockquote>
<p>powerpc-gpopt no-powerpc-gpopt</p>
<blockquote>
<div><p id="index-192">Generate code that uses (does not use) the optional PowerPC
architecture instructions in the General Purpose group, including
floating-point square root.</p>
</div></blockquote>
<p>recip-precision no-recip-precision</p>
<blockquote>
<div><p id="index-193">Assume (do not assume) that the reciprocal estimate instructions
provide higher-precision estimates than is mandated by the PowerPC
ABI.</p>
</div></blockquote>
<p>string no-string</p>
<blockquote>
<div><p id="index-194">Generate code that uses (does not use) the load string instructions
and the store string word instructions to save multiple registers and
do small block moves.</p>
</div></blockquote>
<p>vsx no-vsx</p>
<blockquote>
<div><p id="index-195">Generate code that uses (does not use) vector/scalar (VSX)
instructions, and also enable the use of built-in functions that allow
more direct access to the VSX instruction set.  In 32-bit code, you
cannot enable VSX or AltiVec instructions unless
<em class="xref std std-option">-mabi=altivec</em> is used on the command line.</p>
</div></blockquote>
<p>friz no-friz</p>
<blockquote>
<div><p id="index-196">Generate (do not generate) the <tt class="docutils literal"><span class="pre">friz</span></tt> instruction when the
<a class="reference internal" href="options-that-control-optimization.html#cmdoption-funsafe-math-optimizations"><em class="xref std std-option">-funsafe-math-optimizations</em></a> option is used to optimize
rounding a floating-point value to 64-bit integer and back to floating
point.  The <tt class="docutils literal"><span class="pre">friz</span></tt> instruction does not return the same value if
the floating-point number is too large to fit in an integer.</p>
</div></blockquote>
<p>avoid-indexed-addresses no-avoid-indexed-addresses</p>
<blockquote>
<div><p id="index-197">Generate code that tries to avoid (not avoid) the use of indexed load
or store instructions.</p>
</div></blockquote>
<p>paired no-paired</p>
<blockquote>
<div><p id="index-198">Generate code that uses (does not use) the generation of PAIRED simd
instructions.</p>
</div></blockquote>
<p>longcall no-longcall</p>
<blockquote>
<div><p id="index-199">Generate code that assumes (does not assume) that all calls are far
away so that a longer more expensive calling sequence is required.</p>
</div></blockquote>
<p>cpu=``CPU``</p>
<blockquote>
<div><p id="index-200">Specify the architecture to generate code for when compiling the
function.  If you select the <tt class="docutils literal"><span class="pre">target(&quot;cpu=power7&quot;)</span></tt> attribute when
generating 32-bit code, VSX and AltiVec instructions are not generated
unless you use the <em class="xref std std-option">-mabi=altivec</em> option on the command line.</p>
</div></blockquote>
<p>tune=``TUNE``</p>
<blockquote>
<div><p id="index-201">Specify the architecture to tune for when compiling the function.  If
you do not specify the <tt class="docutils literal"><span class="pre">target(&quot;tune=``TUNE</span></tt>&#8221;)`` attribute and
you do specify the <tt class="docutils literal"><span class="pre">target(&quot;cpu=``CPU</span></tt>&#8221;)`` attribute,
compilation tunes for the <tt class="docutils literal"><span class="pre">CPU</span></tt> architecture, and not the
default tuning specified on the command line.</p>
<p>On the PowerPC, the inliner does not inline a</p>
</div></blockquote>
<p>function that has different target options than the caller, unless the
callee has a subset of the target options of the caller.</p>
</div></blockquote>
</div>
<div class="section" id="rl78-function-attributes">
<span id="id22"></span><h2>RL78 Function Attributes<a class="headerlink" href="#rl78-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the RL78 back end:</p>
<p>interrupt brk_interrupt</p>
<blockquote>
<div><span class="target" id="index-202"></span><p id="index-203">These attributes indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
<p>Use <tt class="docutils literal"><span class="pre">brk_interrupt</span></tt> instead of <tt class="docutils literal"><span class="pre">interrupt</span></tt> for
handlers intended to be used with the <tt class="docutils literal"><span class="pre">BRK</span></tt> opcode (i.e. those
that must end with <tt class="docutils literal"><span class="pre">RETB</span></tt> instead of <tt class="docutils literal"><span class="pre">RETI</span></tt>).</p>
</div></blockquote>
<p>naked</p>
<blockquote>
<div><p id="index-204">This attribute allows the compiler to construct the
requisite function declaration, while allowing the body of the
function to be assembly code. The specified function will not have
prologue/epilogue sequences generated by the compiler. Only basic
<tt class="docutils literal"><span class="pre">asm</span></tt> statements can safely be included in naked functions
(see <a class="reference internal" href="how-to-use-inline-assembly-language-in-c-code.html#basic-asm"><em>Basic Asm - Assembler Instructions Without Operands</em></a>). While using extended <tt class="docutils literal"><span class="pre">asm</span></tt> or a mixture of
basic <tt class="docutils literal"><span class="pre">asm</span></tt> and C code may appear to work, they cannot be
depended upon to work reliably and are not supported.</p>
</div></blockquote>
</div>
<div class="section" id="rx-function-attributes">
<span id="id23"></span><h2>RX Function Attributes<a class="headerlink" href="#rx-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the RX back end:</p>
<p>fast_interrupt</p>
<blockquote>
<div><p id="index-205">Use this attribute on the RX port to indicate that the specified
function is a fast interrupt handler.  This is just like the
<tt class="docutils literal"><span class="pre">interrupt</span></tt> attribute, except that <tt class="docutils literal"><span class="pre">freit</span></tt> is used to return
instead of <tt class="docutils literal"><span class="pre">reit</span></tt>.</p>
</div></blockquote>
<p>interrupt</p>
<blockquote>
<div><p id="index-206">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
<p>On RX targets, you may specify one or more vector numbers as arguments
to the attribute, as well as naming an alternate table name.
Parameters are handled sequentially, so one handler can be assigned to
multiple entries in multiple tables.  One may also pass the magic
string <tt class="docutils literal"><span class="pre">&quot;$default&quot;</span></tt> which causes the function to be used for any
unfilled slots in the current table.</p>
<p>This example shows a simple assignment of a function to one vector in
the default table (note that preprocessor macros may be used for
chip-specific symbolic vector names):</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span> <span class="p">(</span><span class="mi">5</span><span class="p">)))</span> <span class="n">txd1_handler</span> <span class="p">();</span>
</pre></div>
</div>
<p>This example assigns a function to two slots in the default table
(using preprocessor macros defined elsewhere) and makes it the default
for the <tt class="docutils literal"><span class="pre">dct</span></tt> table:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">interrupt</span> <span class="p">(</span><span class="n">RXD1_VECT</span><span class="p">,</span><span class="n">RXD2_VECT</span><span class="p">,</span><span class="s">&quot;dct&quot;</span><span class="p">,</span><span class="s">&quot;$default&quot;</span><span class="p">)))</span>
    <span class="n">txd1_handler</span> <span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
<p>naked</p>
<blockquote>
<div><p id="index-207">This attribute allows the compiler to construct the
requisite function declaration, while allowing the body of the
function to be assembly code. The specified function will not have
prologue/epilogue sequences generated by the compiler. Only basic
<tt class="docutils literal"><span class="pre">asm</span></tt> statements can safely be included in naked functions
(see <a class="reference internal" href="how-to-use-inline-assembly-language-in-c-code.html#basic-asm"><em>Basic Asm - Assembler Instructions Without Operands</em></a>). While using extended <tt class="docutils literal"><span class="pre">asm</span></tt> or a mixture of
basic <tt class="docutils literal"><span class="pre">asm</span></tt> and C code may appear to work, they cannot be
depended upon to work reliably and are not supported.</p>
</div></blockquote>
<p>vector</p>
<blockquote>
<div><p id="index-208">This RX attribute is similar to the <tt class="docutils literal"><span class="pre">interrupt</span></tt> attribute, including its
parameters, but does not make the function an interrupt-handler type
function (i.e. it retains the normal C function calling ABI).  See the
<tt class="docutils literal"><span class="pre">interrupt</span></tt> attribute for a description of its arguments.</p>
</div></blockquote>
</div>
<div class="section" id="s-390-function-attributes">
<span id="id24"></span><h2>S/390 Function Attributes<a class="headerlink" href="#s-390-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported on the S/390:</p>
<p>hotpatch (<tt class="docutils literal"><span class="pre">halfwords-before-function-label</span></tt>,``halfwords-after-function-label``)</p>
<blockquote>
<div><p id="index-209">On S/390 System z targets, you can use this function attribute to
make GCC generate a &#8216;hot-patching&#8217; function prologue.  If the
<em class="xref std std-option">-mhotpatch=</em> command-line option is used at the same time,
the <tt class="docutils literal"><span class="pre">hotpatch</span></tt> attribute takes precedence.  The first of the
two arguments specifies the number of halfwords to be added before
the function label.  A second argument can be used to specify the
number of halfwords to be added after the function label.  For
both arguments the maximum allowed value is 1000000.</p>
<p>If both arguments are zero, hotpatching is disabled.</p>
</div></blockquote>
</div>
<div class="section" id="sh-function-attributes">
<span id="id25"></span><h2>SH Function Attributes<a class="headerlink" href="#sh-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported on the SH family of processors:</p>
<p>function_vector</p>
<blockquote>
<div><span class="target" id="index-210"></span><p id="index-211">On SH2A targets, this attribute declares a function to be called using the
TBR relative addressing mode.  The argument to this attribute is the entry
number of the same function in a vector table containing all the TBR
relative addressable functions.  For correct operation the TBR must be setup
accordingly to point to the start of the vector table before any functions with
this attribute are invoked.  Usually a good place to do the initialization is
the startup routine.  The TBR relative vector table can have at max 256 function
entries.  The jumps to these functions are generated using a SH2A specific,
non delayed branch instruction JSR/N &#64;(disp8,TBR).  You must use GAS and GLD
from GNU binutils version 2.7 or later for this attribute to work correctly.</p>
<p>In an application, for a function being called once, this attribute
saves at least 8 bytes of code; and if other successive calls are being
made to the same function, it saves 2 bytes of code per each of these
calls.</p>
</div></blockquote>
<p>interrupt_handler</p>
<blockquote>
<div><p id="index-212">Use this attribute to
indicate that the specified function is an interrupt handler.  The compiler
generates function entry and exit sequences suitable for use in an
interrupt handler when this attribute is present.</p>
</div></blockquote>
<p>nosave_low_regs</p>
<blockquote>
<div><p id="index-213">Use this attribute on SH targets to indicate that an <tt class="docutils literal"><span class="pre">interrupt_handler</span></tt>
function should not save and restore registers R0..R7.  This can be used on SH3*
and SH4* targets that have a second R0..R7 register bank for non-reentrant
interrupt handlers.</p>
</div></blockquote>
<p>renesas</p>
<blockquote>
<div><p id="index-214">On SH targets this attribute specifies that the function or struct follows the
Renesas ABI.</p>
</div></blockquote>
<p>resbank</p>
<blockquote>
<div><p id="index-215">On the SH2A target, this attribute enables the high-speed register
saving and restoration using a register bank for <tt class="docutils literal"><span class="pre">interrupt_handler</span></tt>
routines.  Saving to the bank is performed automatically after the CPU
accepts an interrupt that uses a register bank.</p>
<p>The nineteen 32-bit registers comprising general register R0 to R14,
control register GBR, and system registers MACH, MACL, and PR and the
vector table address offset are saved into a register bank.  Register
banks are stacked in first-in last-out (FILO) sequence.  Restoration
from the bank is executed by issuing a RESBANK instruction.</p>
</div></blockquote>
<p>sp_switch</p>
<blockquote>
<div><p id="index-216">Use this attribute on the SH to indicate an <tt class="docutils literal"><span class="pre">interrupt_handler</span></tt>
function should switch to an alternate stack.  It expects a string
argument that names a global variable holding the address of the
alternate stack.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="o">*</span><span class="n">alt_stack</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">f</span> <span class="p">()</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">interrupt_handler</span><span class="p">,</span>
                          <span class="n">sp_switch</span> <span class="p">(</span><span class="s">&quot;alt_stack&quot;</span><span class="p">)));</span>
</pre></div>
</div>
</div></blockquote>
<p>trap_exit</p>
<blockquote>
<div><p id="index-217">Use this attribute on the SH for an <tt class="docutils literal"><span class="pre">interrupt_handler</span></tt> to return using
<tt class="docutils literal"><span class="pre">trapa</span></tt> instead of <tt class="docutils literal"><span class="pre">rte</span></tt>.  This attribute expects an integer
argument specifying the trap number to be used.</p>
</div></blockquote>
<p>trapa_handler</p>
<blockquote>
<div><p id="index-218">On SH targets this function attribute is similar to <tt class="docutils literal"><span class="pre">interrupt_handler</span></tt>
but it does not save and restore all registers.</p>
</div></blockquote>
</div>
<div class="section" id="spu-function-attributes">
<span id="id26"></span><h2>SPU Function Attributes<a class="headerlink" href="#spu-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the SPU back end:</p>
<p>naked</p>
<blockquote>
<div><p id="index-219">This attribute allows the compiler to construct the
requisite function declaration, while allowing the body of the
function to be assembly code. The specified function will not have
prologue/epilogue sequences generated by the compiler. Only basic
<tt class="docutils literal"><span class="pre">asm</span></tt> statements can safely be included in naked functions
(see <a class="reference internal" href="how-to-use-inline-assembly-language-in-c-code.html#basic-asm"><em>Basic Asm - Assembler Instructions Without Operands</em></a>). While using extended <tt class="docutils literal"><span class="pre">asm</span></tt> or a mixture of
basic <tt class="docutils literal"><span class="pre">asm</span></tt> and C code may appear to work, they cannot be
depended upon to work reliably and are not supported.</p>
</div></blockquote>
</div>
<div class="section" id="symbian-os-function-attributes">
<span id="id27"></span><h2>Symbian OS Function Attributes<a class="headerlink" href="#symbian-os-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="#microsoft-windows-function-attributes"><em>Microsoft Windows Function Attributes</em></a>, for discussion of the
<tt class="docutils literal"><span class="pre">dllexport</span></tt> and <tt class="docutils literal"><span class="pre">dllimport</span></tt> attributes.</p>
</div>
<div class="section" id="visium-function-attributes">
<span id="id28"></span><h2>Visium Function Attributes<a class="headerlink" href="#visium-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the Visium back end:</p>
<p>interrupt</p>
<blockquote>
<div><p id="index-220">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
</div></blockquote>
</div>
<div class="section" id="x86-function-attributes">
<span id="id29"></span><h2>x86 Function Attributes<a class="headerlink" href="#x86-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the x86 back end:</p>
<dl class="option">
<dt id="cmdoption-mrtd">
<tt class="descname">-mrtd</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-mrtd" title="Permalink to this definition">¶</a></dt>
<dd><span class="target" id="index-221"></span><p id="index-222">On the x86-32 targets, the <tt class="docutils literal"><span class="pre">cdecl</span></tt> attribute causes the compiler to
assume that the calling function pops off the stack space used to
pass arguments.  This is
useful to override the effects of the <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-mrtd"><em class="xref std std-option">-mrtd</em></a> switch.</p>
</dd></dl>

<p>fastcall</p>
<blockquote>
<div><span class="target" id="index-223"></span><p id="index-224">On x86-32 targets, the <tt class="docutils literal"><span class="pre">fastcall</span></tt> attribute causes the compiler to
pass the first argument (if of integral type) in the register ECX and
the second argument (if of integral type) in the register EDX.  Subsequent
and other typed arguments are passed on the stack.  The called function
pops the arguments off the stack.  If the number of arguments is variable all
arguments are pushed on the stack.</p>
</div></blockquote>
<p>thiscall</p>
<blockquote>
<div><span class="target" id="index-225"></span><p id="index-226">On x86-32 targets, the <tt class="docutils literal"><span class="pre">thiscall</span></tt> attribute causes the compiler to
pass the first argument (if of integral type) in the register ECX.
Subsequent and other typed arguments are passed on the stack. The called
function pops the arguments off the stack.
If the number of arguments is variable all arguments are pushed on the
stack.
The <tt class="docutils literal"><span class="pre">thiscall</span></tt> attribute is intended for C++ non-static member functions.
As a GCC extension, this calling convention can be used for C functions
and for static member methods.</p>
</div></blockquote>
<p>ms_abi sysv_abi</p>
<blockquote>
<div><span class="target" id="index-227"></span><p id="index-228">On 32-bit and 64-bit x86 targets, you can use an ABI attribute
to indicate which calling convention should be used for a function.  The
<tt class="docutils literal"><span class="pre">ms_abi</span></tt> attribute tells the compiler to use the Microsoft ABI,
while the <tt class="docutils literal"><span class="pre">sysv_abi</span></tt> attribute tells the compiler to use the ABI
used on GNU/Linux and other systems.  The default is to use the Microsoft ABI
when targeting Windows.  On all other systems, the default is the x86/AMD ABI.</p>
<p>Note, the <tt class="docutils literal"><span class="pre">ms_abi</span></tt> attribute for Microsoft Windows 64-bit targets currently
requires the <a class="reference internal" href="hardware-models-and-configurations.html#cmdoption-maccumulate-outgoing-args"><em class="xref std std-option">-maccumulate-outgoing-args</em></a> option.</p>
</div></blockquote>
<p>callee_pop_aggregate_return (<tt class="docutils literal"><span class="pre">number</span></tt>)</p>
<blockquote>
<div><p id="index-229">On x86-32 targets, you can use this attribute to control how
aggregates are returned in memory.  If the caller is responsible for
popping the hidden pointer together with the rest of the arguments, specify
<tt class="docutils literal"><span class="pre">number</span></tt> equal to zero.  If callee is responsible for popping the
hidden pointer, specify <tt class="docutils literal"><span class="pre">number</span></tt> equal to one.</p>
<p>The default x86-32 ABI assumes that the callee pops the
stack for hidden pointer.  However, on x86-32 Microsoft Windows targets,
the compiler assumes that the
caller pops the stack for hidden pointer.</p>
</div></blockquote>
<p>ms_hook_prologue</p>
<blockquote>
<div><p id="index-230">On 32-bit and 64-bit x86 targets, you can use
this function attribute to make GCC generate the &#8216;hot-patching&#8217; function
prologue used in Win32 API functions in Microsoft Windows XP Service Pack 2
and newer.</p>
</div></blockquote>
<p>regparm (<tt class="docutils literal"><span class="pre">number</span></tt>)</p>
<blockquote>
<div><span class="target" id="index-231"></span><p id="index-232">On x86-32 targets, the <tt class="docutils literal"><span class="pre">regparm</span></tt> attribute causes the compiler to
pass arguments number one to <tt class="docutils literal"><span class="pre">number</span></tt> if they are of integral type
in registers EAX, EDX, and ECX instead of on the stack.  Functions that
take a variable number of arguments continue to be passed all of their
arguments on the stack.</p>
<p>Beware that on some ELF systems this attribute is unsuitable for
global functions in shared libraries with lazy binding (which is the
default).  Lazy binding sends the first call via resolving code in
the loader, which might assume EAX, EDX and ECX can be clobbered, as
per the standard calling conventions.  Solaris 8 is affected by this.
Systems with the GNU C Library version 2.1 or higher
and FreeBSD are believed to be
safe since the loaders there save EAX, EDX and ECX.  (Lazy binding can be
disabled with the linker or the loader if desired, to avoid the
problem.)</p>
</div></blockquote>
<p>sseregparm</p>
<blockquote>
<div><p id="index-233">On x86-32 targets with SSE support, the <tt class="docutils literal"><span class="pre">sseregparm</span></tt> attribute
causes the compiler to pass up to 3 floating-point arguments in
SSE registers instead of on the stack.  Functions that take a
variable number of arguments continue to pass all of their
floating-point arguments on the stack.</p>
</div></blockquote>
<p>force_align_arg_pointer</p>
<blockquote>
<div><p id="index-234">On x86 targets, the <tt class="docutils literal"><span class="pre">force_align_arg_pointer</span></tt> attribute may be
applied to individual function definitions, generating an alternate
prologue and epilogue that realigns the run-time stack if necessary.
This supports mixing legacy codes that run with a 4-byte aligned stack
with modern codes that keep a 16-byte stack for SSE compatibility.</p>
</div></blockquote>
<p>stdcall</p>
<blockquote>
<div><span class="target" id="index-235"></span><p id="index-236">On x86-32 targets, the <tt class="docutils literal"><span class="pre">stdcall</span></tt> attribute causes the compiler to
assume that the called function pops off the stack space used to
pass arguments, unless it takes a variable number of arguments.</p>
</div></blockquote>
<p>target (<tt class="docutils literal"><span class="pre">options</span></tt>)</p>
<blockquote>
<div><p id="index-237">As discussed in Common Function Attributes, this attribute
allows specification of target-specific compilation options.</p>
<p>On the x86, the following options are allowed:</p>
<p>abm no-abm</p>
<blockquote>
<div><p id="index-238">Enable/disable the generation of the advanced bit instructions.</p>
</div></blockquote>
<p>aes no-aes</p>
<blockquote>
<div><p id="index-239">Enable/disable the generation of the AES instructions.</p>
</div></blockquote>
<p>default</p>
<blockquote>
<div><p id="index-240">See <a class="reference internal" href="function-multiversioning.html#function-multiversioning"><em>Function Multiversioning</em></a>, where it is used to specify the
default function version.</p>
</div></blockquote>
<p>mmx no-mmx</p>
<blockquote>
<div><p id="index-241">Enable/disable the generation of the MMX instructions.</p>
</div></blockquote>
<p>pclmul no-pclmul</p>
<blockquote>
<div><p id="index-242">Enable/disable the generation of the PCLMUL instructions.</p>
</div></blockquote>
<p>popcnt no-popcnt</p>
<blockquote>
<div><p id="index-243">Enable/disable the generation of the POPCNT instruction.</p>
</div></blockquote>
<p>sse no-sse</p>
<blockquote>
<div><p id="index-244">Enable/disable the generation of the SSE instructions.</p>
</div></blockquote>
<p>sse2 no-sse2</p>
<blockquote>
<div><p id="index-245">Enable/disable the generation of the SSE2 instructions.</p>
</div></blockquote>
<p>sse3 no-sse3</p>
<blockquote>
<div><p id="index-246">Enable/disable the generation of the SSE3 instructions.</p>
</div></blockquote>
<p>sse4 no-sse4</p>
<blockquote>
<div><p id="index-247">Enable/disable the generation of the SSE4 instructions (both SSE4.1
and SSE4.2).</p>
</div></blockquote>
<p>sse4.1 no-sse4.1</p>
<blockquote>
<div><p id="index-248">Enable/disable the generation of the sse4.1 instructions.</p>
</div></blockquote>
<p>sse4.2 no-sse4.2</p>
<blockquote>
<div><p id="index-249">Enable/disable the generation of the sse4.2 instructions.</p>
</div></blockquote>
<p>sse4a no-sse4a</p>
<blockquote>
<div><p id="index-250">Enable/disable the generation of the SSE4A instructions.</p>
</div></blockquote>
<p>fma4 no-fma4</p>
<blockquote>
<div><p id="index-251">Enable/disable the generation of the FMA4 instructions.</p>
</div></blockquote>
<p>xop no-xop</p>
<blockquote>
<div><p id="index-252">Enable/disable the generation of the XOP instructions.</p>
</div></blockquote>
<p>lwp no-lwp</p>
<blockquote>
<div><p id="index-253">Enable/disable the generation of the LWP instructions.</p>
</div></blockquote>
<p>ssse3 no-ssse3</p>
<blockquote>
<div><p id="index-254">Enable/disable the generation of the SSSE3 instructions.</p>
</div></blockquote>
<p>cld no-cld</p>
<blockquote>
<div><p id="index-255">Enable/disable the generation of the CLD before string moves.</p>
</div></blockquote>
<p>fancy-math-387 no-fancy-math-387</p>
<blockquote>
<div><p id="index-256">Enable/disable the generation of the <tt class="docutils literal"><span class="pre">sin</span></tt>, <tt class="docutils literal"><span class="pre">cos</span></tt>, and
<tt class="docutils literal"><span class="pre">sqrt</span></tt> instructions on the 387 floating-point unit.</p>
</div></blockquote>
<p>fused-madd no-fused-madd</p>
<blockquote>
<div><p id="index-257">Enable/disable the generation of the fused multiply/add instructions.</p>
</div></blockquote>
<p>ieee-fp no-ieee-fp</p>
<blockquote>
<div><p id="index-258">Enable/disable the generation of floating point that depends on IEEE arithmetic.</p>
</div></blockquote>
<p>inline-all-stringops no-inline-all-stringops</p>
<blockquote>
<div><p id="index-259">Enable/disable inlining of string operations.</p>
</div></blockquote>
<p>inline-stringops-dynamically no-inline-stringops-dynamically</p>
<blockquote>
<div><p id="index-260">Enable/disable the generation of the inline code to do small string
operations and calling the library routines for large operations.</p>
</div></blockquote>
<p>align-stringops no-align-stringops</p>
<blockquote>
<div><p id="index-261">Do/do not align destination of inlined string operations.</p>
</div></blockquote>
<p>recip no-recip</p>
<blockquote>
<div><p id="index-262">Enable/disable the generation of RCPSS, RCPPS, RSQRTSS and RSQRTPS
instructions followed an additional Newton-Raphson step instead of
doing a floating-point division.</p>
</div></blockquote>
<p>arch=``ARCH``</p>
<blockquote>
<div><p id="index-263">Specify the architecture to generate code for in compiling the function.</p>
</div></blockquote>
<p>tune=``TUNE``</p>
<blockquote>
<div><p id="index-264">Specify the architecture to tune for in compiling the function.</p>
</div></blockquote>
<p>fpmath=``FPMATH``</p>
<blockquote>
<div><p id="index-265">Specify which floating-point unit to use.  You must specify the
<tt class="docutils literal"><span class="pre">target(&quot;fpmath=sse,387&quot;)</span></tt> option as
<tt class="docutils literal"><span class="pre">target(&quot;fpmath=sse+387&quot;)</span></tt> because the comma would separate
different options.</p>
<p>On the x86, the inliner does not inline a</p>
</div></blockquote>
<p>function that has different target options than the caller, unless the
callee has a subset of the target options of the caller.  For example
a function declared with <tt class="docutils literal"><span class="pre">target(&quot;sse3&quot;)</span></tt> can inline a function
with <tt class="docutils literal"><span class="pre">target(&quot;sse2&quot;)</span></tt>, since <tt class="docutils literal"><span class="pre">-msse3</span></tt> implies <tt class="docutils literal"><span class="pre">-msse2</span></tt>.</p>
</div></blockquote>
</div>
<div class="section" id="xstormy16-function-attributes">
<span id="id30"></span><h2>Xstormy16 Function Attributes<a class="headerlink" href="#xstormy16-function-attributes" title="Permalink to this headline">¶</a></h2>
<p>These function attributes are supported by the Xstormy16 back end:</p>
<p>interrupt</p>
<blockquote>
<div><p id="index-266">Use this attribute to indicate
that the specified function is an interrupt handler.  The compiler generates
function entry and exit sequences suitable for use in an interrupt handler
when this attribute is present.</p>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="specifying-attributes-of-variables.html" title="Specifying Attributes of Variables"
             >next</a> |</li>
        <li class="right" >
          <a href="mixed-declarations-and-code.html" title="Mixed Declarations and Code"
             >previous</a> |</li>
        <li><a href="index.html">gcc 6 documentation</a> &raquo;</li>
          <li><a href="gcc.html" >Introduction</a> &raquo;</li>
          <li><a href="extensions-to-the-c-language-family.html" >Extensions to the C Language Family</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, gcc peeps.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>