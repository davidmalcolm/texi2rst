

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting the Return or Frame Address of a Function &mdash; gcc 6 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="gcc 6 documentation" href="index.html" />
    <link rel="up" title="Extensions to the C Language Family" href="extensions-to-the-c-language-family.html" />
    <link rel="next" title="Using Vector Instructions through Built-in Functions" href="using-vector-instructions-through-built-in-functions.html" />
    <link rel="prev" title="Function Names as Strings" href="function-names-as-strings.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="using-vector-instructions-through-built-in-functions.html" title="Using Vector Instructions through Built-in Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="function-names-as-strings.html" title="Function Names as Strings"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">gcc 6 documentation</a> &raquo;</li>
          <li><a href="gcc.html" >Introduction</a> &raquo;</li>
          <li><a href="extensions-to-the-c-language-family.html" accesskey="U">Extensions to the C Language Family</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="function-names-as-strings.html"
                        title="previous chapter">Function Names as Strings</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="using-vector-instructions-through-built-in-functions.html"
                        title="next chapter">Using Vector Instructions through Built-in Functions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/getting-the-return-or-frame-address-of-a-function.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-the-return-or-frame-address-of-a-function">
<span id="return-address"></span><h1>Getting the Return or Frame Address of a Function<a class="headerlink" href="#getting-the-return-or-frame-address-of-a-function" title="Permalink to this headline">Â¶</a></h1>
<p>These functions may be used to get information about the callers of a
function.</p>
<p id="index-0">Built-in Functionvoid <a href="#id1"><span class="problematic" id="id2">*</span></a>__builtin_return_address(unsignedint``level``)This function returns the return address of the current function, or of
one of its callers.  The <tt class="docutils literal"><span class="pre">level</span></tt> argument is number of frames to
scan up the call stack.  A value of <tt class="docutils literal"><span class="pre">0</span></tt> yields the return address
of the current function, a value of <tt class="docutils literal"><span class="pre">1</span></tt> yields the return address
of the caller of the current function, and so forth.  When inlining
the expected behavior is that the function returns the address of
the function that is returned to.  To work around this behavior use
the <tt class="docutils literal"><span class="pre">noinline</span></tt> function attribute.</p>
<p>The <tt class="docutils literal"><span class="pre">level</span></tt> argument must be a constant integer.</p>
<p>On some machines it may be impossible to determine the return address of
any function other than the current one; in such cases, or when the top
of the stack has been reached, this function returns <tt class="docutils literal"><span class="pre">0</span></tt> or a
random value.  In addition, <tt class="docutils literal"><span class="pre">__builtin_frame_address</span></tt> may be used
to determine if the top of the stack has been reached.</p>
<p>Additional post-processing of the returned value may be needed, see
<tt class="docutils literal"><span class="pre">__builtin_extract_return_addr</span></tt>.</p>
<p>This function should only be used with a nonzero argument for debugging
purposes.</p>
<p id="index-1">Built-in Functionvoid <a href="#id3"><span class="problematic" id="id4">*</span></a>__builtin_extract_return_addr(void*``addr``)The address as returned by <tt class="docutils literal"><span class="pre">__builtin_return_address</span></tt> may have to be fed
through this function to get the actual encoded address.  For example, on the
31-bit S/390 platform the highest bit has to be masked out, or on SPARC
platforms an offset has to be added for the true next instruction to be
executed.</p>
<p>If no fixup is needed, this function simply passes through <tt class="docutils literal"><span class="pre">addr</span></tt>.</p>
<p id="index-2">Built-in Functionvoid <a href="#id5"><span class="problematic" id="id6">*</span></a>__builtin_frob_return_address(void*``addr``)This function does the reverse of <tt class="docutils literal"><span class="pre">__builtin_extract_return_addr</span></tt>.</p>
<p id="index-3">Built-in Functionvoid <a href="#id7"><span class="problematic" id="id8">*</span></a>__builtin_frame_address(unsignedint``level``)This function is similar to <tt class="docutils literal"><span class="pre">__builtin_return_address</span></tt>, but it
returns the address of the function frame rather than the return address
of the function.  Calling <tt class="docutils literal"><span class="pre">__builtin_frame_address</span></tt> with a value of
<tt class="docutils literal"><span class="pre">0</span></tt> yields the frame address of the current function, a value of
<tt class="docutils literal"><span class="pre">1</span></tt> yields the frame address of the caller of the current function,
and so forth.</p>
<p>The frame is the area on the stack that holds local variables and saved
registers.  The frame address is normally the address of the first word
pushed on to the stack by the function.  However, the exact definition
depends upon the processor and the calling convention.  If the processor
has a dedicated frame pointer register, and the function has a frame,
then <tt class="docutils literal"><span class="pre">__builtin_frame_address</span></tt> returns the value of the frame
pointer register.</p>
<p>On some machines it may be impossible to determine the frame address of
any function other than the current one; in such cases, or when the top
of the stack has been reached, this function returns <tt class="docutils literal"><span class="pre">0</span></tt> if
the first frame pointer is properly initialized by the startup code.</p>
<p>This function should only be used with a nonzero argument for debugging
purposes.</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="using-vector-instructions-through-built-in-functions.html" title="Using Vector Instructions through Built-in Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="function-names-as-strings.html" title="Function Names as Strings"
             >previous</a> |</li>
        <li><a href="index.html">gcc 6 documentation</a> &raquo;</li>
          <li><a href="gcc.html" >Introduction</a> &raquo;</li>
          <li><a href="extensions-to-the-c-language-family.html" >Extensions to the C Language Family</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, gcc peeps.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>