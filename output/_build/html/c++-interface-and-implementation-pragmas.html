

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>C++ Interface and Implementation Pragmas &mdash; gcc 6 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="gcc 6 documentation" href="index.html" />
    <link rel="up" title="Extensions to the C++ Language" href="extensions-to-the-c++-language.html" />
    <link rel="next" title="Wheres the Template?" href="wheres-the-template?.html" />
    <link rel="prev" title="Vague Linkage" href="vague-linkage.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="wheres-the-template?.html" title="Wheres the Template?"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="vague-linkage.html" title="Vague Linkage"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">gcc 6 documentation</a> &raquo;</li>
          <li><a href="gcc.html" >Introduction</a> &raquo;</li>
          <li><a href="extensions-to-the-c++-language.html" accesskey="U">Extensions to the C++ Language</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="vague-linkage.html"
                        title="previous chapter">Vague Linkage</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="wheres-the-template?.html"
                        title="next chapter">Wheres the Template?</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/c++-interface-and-implementation-pragmas.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="c-interface-and-implementation-pragmas">
<h1>C++ Interface and Implementation Pragmas<a class="headerlink" href="#c-interface-and-implementation-pragmas" title="Permalink to this headline">Â¶</a></h1>
<span class="target" id="index-0"></span><span class="target" id="index-1"></span><p id="index-2"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">interface</span></tt> and <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">implementation</span></tt> provide the
user with a way of explicitly directing the compiler to emit entities
with vague linkage (and debugging information) in a particular
translation unit.</p>
<p>Note: These <a href="#id1"><span class="problematic" id="id2">``</span></a>#pragma``s have been superceded as of GCC 2.7.2
by COMDAT support and the key method heuristic
mentioned in Vague Linkage.  Using them can actually cause your
program to grow due to unnecessary out-of-line copies of inline
functions.</p>
<p>#pragma interface#pragma interface &#8220;<tt class="docutils literal"><span class="pre">subdir</span></tt>/<tt class="docutils literal"><span class="pre">objects</span></tt>.h&#8221;</p>
<blockquote>
<div><p id="index-3">Use this directive in header files that define object classes, to save
space in most of the object files that use those classes.  Normally,
local copies of certain information (backup copies of inline member
functions, debugging information, and the internal tables that implement
virtual functions) must be kept in each object file that includes class
definitions.  You can use this pragma to avoid such duplication.  When a
header file containing #pragma interface is included in a
compilation, this auxiliary information is not generated (unless
the main input source file itself uses #pragma implementation).
Instead, the object files contain references to be resolved at link
time.</p>
<p>The second form of this directive is useful for the case where you have
multiple headers with the same name in different directories.  If you
use this form, you must specify the same string to #pragma
implementation.</p>
</div></blockquote>
<p>#pragma implementation#pragma implementation &#8220;<tt class="docutils literal"><span class="pre">objects</span></tt>.h&#8221;</p>
<blockquote>
<div><p id="index-4">Use this pragma in a main input file, when you want full output from
included header files to be generated (and made globally visible).  The
included header file, in turn, should use #pragma interface.
Backup copies of inline member functions, debugging information, and the
internal tables used to implement virtual functions are all generated in
implementation files.</p>
<p>implied <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">implementation</span></tt>
<tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">implementation</span></tt>, implied</p>
<p id="index-5">If you use #pragma implementation with no argument, it applies to
an include file with the same basenameA files <em class="dfn">basename</em>
is the name stripped of all leading path information and of trailing
suffixes, such as .h or .C or .cc. as your source
file.  For example, in allclass.cc, giving just
#pragma implementation
by itself is equivalent to #pragma implementation &#8220;allclass.h&#8221;.</p>
<p>Use the string argument if you want a single implementation file to
include code from multiple header files.  (You must also use
#include to include the header file; #pragma
implementation only specifies how to use the fileit doesnt actually
include it.)</p>
<p>There is no way to split up the contents of a single header file into
multiple implementation files.</p>
</div></blockquote>
<span class="target" id="index-6"></span><span class="target" id="index-7"></span><p id="index-8">#pragma implementation and #pragma interface also have an
effect on function inlining.</p>
<p>If you define a class in a header file marked with #pragma
interface, the effect on an inline function defined in that class is
similar to an explicit <tt class="docutils literal"><span class="pre">extern</span></tt> declarationthe compiler emits
no code at all to define an independent version of the function.  Its
definition is used only for inlining with its callers.</p>
<p id="index-9">Conversely, when you include the same header file in a main source file
that declares it as #pragma implementation, the compiler emits
code for the function itself; this defines a version of the function
that can be found via pointers (or by callers compiled without
inlining).  If all calls to the function can be inlined, you can avoid
emitting the function by compiling with <a class="reference internal" href="options-controlling-c++-dialect.html#cmdoption-fno-implement-inlines"><em class="xref std std-option">-fno-implement-inlines</em></a>.
If any calls are not inlined, you will get linker errors.</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="wheres-the-template?.html" title="Wheres the Template?"
             >next</a> |</li>
        <li class="right" >
          <a href="vague-linkage.html" title="Vague Linkage"
             >previous</a> |</li>
        <li><a href="index.html">gcc 6 documentation</a> &raquo;</li>
          <li><a href="gcc.html" >Introduction</a> &raquo;</li>
          <li><a href="extensions-to-the-c++-language.html" >Extensions to the C++ Language</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, gcc peeps.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>